(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{b6Ez:function(e,t,a){"use strict";a.r(t);var s=a("8Y7J"),i=a("M0ag");class n extends i.SettingsManager{constructor(e,t){super(e,t)}getPluginUrl(e){return Object(i.getAbsoluteResourceUrl)(this.getMostAccurateBaseUrl(),this._getString(this.getSections(e),"sectionUrl",null))}}class r{constructor(){this.history=new Array}gbPluginDidLoad(){this.postMessage("gbPluginDidLoad")}gbViewDidAppear(){this.postMessage("gbViewDidAppear")}gbDidFailGetLocation(e){this.postMessage("gbDidFailGetLocation",[e])}gbDidSuccessGetLocation(e){this.postMessage("gbDidSuccessGetLocation",[e.coords.latitude,e.coords.longitude])}gbDidFailGetMedia(e){this.postMessage("gbDidFailGetMedia",[e])}gbDidSuccessGetMedia(e,t){this.postMessage("gbDidSuccessGetMedia",[e,t])}gbDidSuccessGetTimezoneOffset(e){this.postMessage("gbDidSuccessGetTimezoneOffset",[e])}gbDidFailGetUser(e){this.postMessage("gbDidFailGetUser",[e])}gbDidSuccessGetUser(e){this.postMessage("gbDidSuccessGetUser",[JSON.stringify(e)])}gbDidSuccessGetPreference(e,t){this.postMessage("gbDidSuccessGetPreference",[e,t])}gbRequestDidFail(e,t,a){this.postMessage("gbRequestDidFail",[e,t,a])}gbRequestDidSuccess(e,t,a){this.postMessage("gbRequestDidSuccess",[e,t,a])}gbRequestDidSuccessWithCache(e,t,a){this.postMessage("gbRequestDidSuccessWithCache",[e,t,a])}navigateBack(){this.history.pop();const e=this.history[this.history.length-1];e?this.navigateTo(e):this.frame.src=this.baseUrl}navigateTo(e){const t=this.baseUrl.replace("/index.html",`/${e}.html`);this.frame.src=t,this.history.push(e)}initPlugin(){this.postMessage("gbWebsiteInitPlugin")}setPostData(e){this.setData("gbPostData",e)}setUserInfo(){const e={platform:"website",language:window.navigator.language};this.setData("gbUserInfo",e)}setData(e,t){this.postMessage("gbWebsiteSetData",[e,t])}postMessage(e,t){this.frame.contentWindow.postMessage({method:e,params:t},"*")}}var o=a("cUpR"),l=a("HDdC"),c=a("eIep"),b=a("lJxs");class g{constructor(e,t,a,s){this.authService=e,this.iframeController=t,this.geoloc=a,this.requestService=s}callMethod(e,t,a){switch(e){case"getlocation":this.getLocation();break;case"getmedia":const s=t.get("type");this.getMedia(s);break;case"gettimezoneoffset":this.getTimezoneOffset();break;case"getuser":this.getUser();break;case"request":const i=decodeURIComponent(t.get("url")),n=Number.parseInt(t.get("tag")),r=t.get("cache");let o;o=a?"POST":t.get("method"),this.request(i,n,r,o,a);break;case"setpreference":const l=t.get("key");let c=t.get("value");this.setPreference(l,c);break;case"getpreference":const b=t.get("key");this.getPreference(b);break;case"navigate.push":case"navigate.modal":const g=decodeURIComponent(t.get("page"));this.navigate(g);break;case"navigate.back":this.navigateBack();break;case"init":this.iframeController.initPlugin(),this.iframeController.setUserInfo(),this.iframeController.setPostData(a),this.iframeController.gbPluginDidLoad(),this.iframeController.gbViewDidAppear()}}getLocation(){this.geoloc.getCurrentPosition().subscribe(e=>this.iframeController.gbDidSuccessGetLocation(e),e=>this.iframeController.gbDidFailGetLocation(e&&e.message))}getMedia(e){this.createInput(e).pipe(Object(c.a)(e=>this.readMedia(e))).subscribe(e=>this.iframeController.gbDidSuccessGetMedia(e.data,e.url),e=>this.iframeController.gbDidFailGetMedia(e))}createInput(e){return new l.a(t=>{let a=Object(o.z)().createElement("input");a.setAttribute("type","file"),a.setAttribute("accept","video"===e?"video/*":"image/*");let s=e=>{const s=a.files;if(s.length>0){let e=s.item(0);const a=URL.createObjectURL(e);t.next({file:e,url:a}),t.complete()}else t.error("No file found")};return a.addEventListener("change",s),a.click(),()=>{a.removeEventListener("change",s),Object(o.z)().remove(a)}})}readMedia(e){return Object(i.readFileAsDataUrl)(e.file).pipe(Object(b.a)(t=>({url:e.url,data:encodeURIComponent(t)})))}getTimezoneOffset(){let e=(new Date).getTimezoneOffset();this.iframeController.gbDidSuccessGetTimezoneOffset(e)}getUser(){const e=this.authService.authenticatedUser;if(e){let t,a,s=new i.JsonObject(e.jsonUser).getJsonObject("attribs");s&&(t=s.getJsonObject("intern"),a=s.getJsonObject("socialAccountsUrl")),this.iframeController.gbDidSuccessGetUser({description:e.description,displayName:e.displayName,email:e.email,attribs:t?t.object:{},location:e.location,photoUrl:e.urlPhoto,socialAccounts:a?a.object:{},userId:e.unformattedId,userName:e.name})}else this.iframeController.gbDidFailGetUser("No user found")}navigate(e){this.iframeController.navigateTo(e)}navigateBack(){this.iframeController.navigateBack()}request(e,t,a,s,i){this.requestService.request(e,t,a,s,i)}getPreference(e){let t=localStorage.getItem(e);this.iframeController.gbDidSuccessGetPreference(e,t)}setPreference(e,t){localStorage.setItem(e,t)}}var u=a("z6cu"),h=a("JIr8");class d{constructor(e,t){this.http=e,this.iframeController=t,this.cache=new Map}request(e,t,a,s,i){if("YES"===a){const a=this.cache.get(e);if(a)return void this.iframeController.gbRequestDidSuccessWithCache(t,a.data,a.url)}let n;(n=s&&"POST"===s?this.http.post(e,i,{responseType:"blob"}):this.http.get(e,{responseType:"blob"})).pipe(Object(h.a)(e=>Object(u.a)({code:e.status,text:e.statusText})),Object(c.a)(e=>this.readData(e))).subscribe(a=>{this.iframeController.gbRequestDidSuccess(t,a.data,a.url),this.cache.set(e,{data:a.data,url:a.url})},e=>{this.iframeController.gbRequestDidFail(t,e.code,e.text)})}readData(e){return new l.a(t=>{const a=URL.createObjectURL(e),s=new FileReader;let i=()=>{const e=encodeURIComponent(s.result);t.next({data:e,url:a}),t.complete()},n=()=>{t.error({code:0,text:"File error"})};return s.addEventListener("load",i),s.addEventListener("error",n),s.readAsText(e),()=>{s.removeEventListener("load",i),s.removeEventListener("error",n)}})}}var f=a("EY2u");class m{constructor(e,t){this.linksManager=e,this.pluginMethods=t}handlePluginLink(e,t,a){const s=this.getMethodName(e),i=this.getParams(e);return s&&"gotosection"!==s?(this.pluginMethods.callMethod(s,i,a),Object(f.b)()):this.linksManager.handleLink(e,t)}getMethodName(e){if("string"!=typeof e)return null;const t=e.split("?")[0].match(/goodbarber:\/\/([a-z\.]*)/);return t?t[1]:null}getParams(e){let t=new Map;if(e){const a=e.split("?")[1];a&&a.split("&").forEach(e=>{let a=e.split("=");t.set(a[0],a[1])})}return t}}class p{}function B(e,t,a){let s=new n(t,a);return s.settings=e.settings,s}var D=a("pMnS"),M=a("t68o"),P=a("xYTU"),v=a("NcP4"),C=a("Dx5E"),U=a("X8YY"),S=a("WkWd"),O=a("spfm"),w=a("5R8M"),k=a("Zg2X"),I=a("W+4B"),y=a("wmFi"),G=a("TaRp"),j=a("7PJx"),L=a("b/2F"),x=a("OlEG"),q=a("bXwg"),F=a("cKUb"),R=a("6f3J"),T=a("6ojV"),A=a("SVse"),z=a("mrSG"),N=a("xgIS"),E=a("WkGQ");let J=(()=>{class e{constructor(e,t,a,s,i,n){this.route=e,this.sanitizer=t,this.settingsManager=a,this.iframeController=s,this.linksManager=i,this.platform=n,this.postParams={},this.filterDomain=new RegExp(this.settingsManager.getMostAccurateBaseUrl())}ngOnInit(){this.sectionId=this.route.snapshot.data.section,this.setPluginUrl(),this.messageSubscription=Object(N.a)(this.platform.windowRef,"message").subscribe(e=>{e.data.params&&(this.postParams=e.data.params),this.linksManager.handlePluginLink(e.data.url,this.sectionId,e.data.params).subscribe()})}ngAfterViewInit(){this.initFrame()}ngOnDestroy(){this.messageSubscription.unsubscribe()}setPluginUrl(){let e=this.settingsManager.getPluginUrl(this.sectionId);e+=`${/\?/.exec(e)?"&":"?"}define_function=1`,this.frameSrc=this.sanitizer.bypassSecurityTrustResourceUrl(e),this.iframeController.baseUrl=e,this.initFrame()}initFrame(){if(this.frame){let e=this.frame.nativeElement;this.iframeController.frame=e,this.iframeController.baseUrl=this.settingsManager.getPluginUrl(this.sectionId),Object(o.z)().onAndCancel(e,"load",()=>{this.iframeController.initPlugin(),this.iframeController.setUserInfo(),this.iframeController.setPostData(this.postParams),this.postParams={},this.iframeController.gbPluginDidLoad(),this.iframeController.gbViewDidAppear()})}}}return z.__decorate([Object(E.a)("sections")],e.prototype,"setPluginUrl",null),e})();var W=a("iInd"),V=s.pb({encapsulation:0,styles:[["#frame-container[_ngcontent-%COMP%]   gb-iframe-container[_ngcontent-%COMP%], gb-classic-layout[_ngcontent-%COMP%]{height:inherit;-webkit-box-flex:1;flex:1}#frame-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-flex:1;flex:1}@media screen and (-ms-high-contrast:active),screen and (-ms-high-contrast:none){#frame-container[_ngcontent-%COMP%]{height:100vh}}"]],data:{}});function _(e){return s.Nb(0,[(e()(),s.rb(0,0,null,null,2,"gb-iframe-container",[],null,null,null,G.b,G.a)),s.qb(1,4243456,null,0,j.a,[L.a,s.D],null,null),(e()(),s.rb(2,0,[[1,0],["pluginFrame",1]],0,0,"iframe",[["frameborder","0"]],[[8,"src",5]],null,null,null,null))],null,function(e,t){e(t,2,0,t.component.frameSrc)})}function H(e){return s.Nb(0,[(e()(),s.rb(0,0,null,null,5,"gb-classic-layout",[],[[4,"background-color",null],[2,"with-tabbar",null],[2,"with-pager",null],[4,"min-height",null]],null,null,x.b,x.a)),s.qb(1,573440,null,1,q.a,[L.a,F.a,R.a,T.a,o.c],{sectionId:[0,"sectionId"]},null),s.Jb(603979776,2,{navbar:0}),(e()(),s.rb(3,0,null,1,2,"div",[["id","frame-container"]],null,null,null,null,null)),(e()(),s.hb(16777216,null,null,1,null,_)),s.qb(5,16384,null,0,A.k,[s.O,s.L],{ngIf:[0,"ngIf"]},null)],function(e,t){var a=t.component;e(t,1,0,a.sectionId),e(t,5,0,a.frameSrc)},function(e,t){e(t,0,0,s.Db(t,1).backgroundColor,s.Db(t,1).hasBottomTabBar,s.Db(t,1).displayCategoryAfterContent,s.Db(t,1).height)})}function X(e){return s.Nb(0,[s.Jb(671088640,1,{frame:0}),(e()(),s.hb(16777216,null,null,1,null,H)),s.qb(2,16384,null,0,A.k,[s.O,s.L],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,2,0,t.component.sectionId)},null)}function Y(e){return s.Nb(0,[(e()(),s.rb(0,0,null,null,1,"ng-component",[],null,null,null,X,V)),s.qb(1,4440064,null,0,J,[W.a,o.c,n,r,m,L.a],null,null)],function(e,t){e(t,1,0)},null)}var Q=s.nb("ng-component",J,Y,{},{},[]),Z=a("s7LF"),K=a("QQfA"),$=a("IP0z"),ee=a("/Co4"),te=a("POq0"),ae=a("s6ns"),se=a("gavF"),ie=a("Xd0L"),ne=a("JjoW"),re=a("Mz6y"),oe=a("fgD+"),le=a("5GAg"),ce=a("/HVE"),be=a("DkaU"),ge=a("tf5s"),ue=a("aUTx"),he=a("L9iM"),de=a("otht"),fe=a("I2LU"),me=a("IheW"),pe=a("jGGy"),Be=a("HwWV"),De=a("XJsk"),Me=a("zMNK"),Pe=a("hOhj"),ve=a("Fwaw"),Ce=a("r0V8"),Ue=a("FVPZ"),Se=a("oapL"),Oe=a("HsOI"),we=a("ZwOa"),ke=a("elxJ"),Ie=a("BV1i"),ye=a("lT8R"),Ge=a("pBi1"),je=a("dFDH"),Le=a("W5yJ"),xe=a("BzsH"),qe=a("AaDx"),Fe=a("jAig"),Re=a("/y2H"),Te=a("xEe7"),Ae=a("yGOH"),ze=a("lnTw"),Ne=a("9Xeq"),Ee=a("06IG"),Je=a("dlQP"),We=a("FVm9"),Ve=a("2niq"),_e=a("5nNx"),He=a("q456"),Xe=a("WOKG"),Ye=a("4dGB"),Qe=a("e34L"),Ze=a("aA5p"),Ke=a("grPM"),$e=a("rNvO"),et=a("4zvT"),tt=a("g8kl"),at=a("/tb3"),st=a("ZSRD"),it=a("sRTU"),nt=a("kGFs"),rt=a("PCNd");a.d(t,"PluginModuleNgFactory",function(){return ot});var ot=s.ob(p,[],function(e){return s.Ab([s.Bb(512,s.j,s.ab,[[8,[D.a,M.a,P.a,P.b,v.a,C.a,U.a,S.a,O.a,w.a,k.a,I.a,y.a,Q]],[3,s.j],s.w]),s.Bb(4608,A.m,A.l,[s.t,[2,A.E]]),s.Bb(4608,Z.e,Z.e,[]),s.Bb(4608,Z.x,Z.x,[]),s.Bb(4608,K.c,K.c,[K.i,K.e,s.j,K.h,K.f,s.q,s.y,A.d,$.b,[2,A.g]]),s.Bb(5120,K.j,K.k,[K.c]),s.Bb(5120,ee.b,ee.c,[K.c]),s.Bb(4608,te.c,te.c,[]),s.Bb(5120,ae.c,ae.d,[K.c]),s.Bb(135680,ae.e,ae.e,[K.c,s.q,[2,A.g],[2,ae.b],ae.c,[3,ae.e],K.e]),s.Bb(5120,se.c,se.j,[K.c]),s.Bb(4608,ie.b,ie.b,[]),s.Bb(5120,ne.a,ne.b,[K.c]),s.Bb(4608,o.f,ie.c,[[2,ie.g],[2,ie.l]]),s.Bb(5120,re.b,re.c,[K.c]),s.Bb(4608,ie.a,oe.d,[ie.f,oe.a]),s.Bb(135680,le.h,le.h,[s.y,ce.a]),s.Bb(4608,be.f,be.f,[s.L]),s.Bb(4608,ge.a,ge.a,[]),s.Bb(5120,ue.a,he.b,[T.a,de.a,fe.a]),s.Bb(5120,n,B,[T.a,de.a,fe.a]),s.Bb(4608,r,r,[]),s.Bb(4608,d,d,[me.c,r]),s.Bb(4608,g,g,[pe.a,r,Be.a,d]),s.Bb(4608,m,m,[De.a,g]),s.Bb(1073742336,W.t,W.t,[[2,W.B],[2,W.p]]),s.Bb(1073742336,A.c,A.c,[]),s.Bb(1073742336,Z.w,Z.w,[]),s.Bb(1073742336,Z.t,Z.t,[]),s.Bb(1073742336,$.a,$.a,[]),s.Bb(1073742336,ie.l,ie.l,[[2,ie.d],[2,o.g]]),s.Bb(1073742336,ce.b,ce.b,[]),s.Bb(1073742336,ie.v,ie.v,[]),s.Bb(1073742336,ie.t,ie.t,[]),s.Bb(1073742336,ie.q,ie.q,[]),s.Bb(1073742336,Me.g,Me.g,[]),s.Bb(1073742336,Pe.c,Pe.c,[]),s.Bb(1073742336,K.g,K.g,[]),s.Bb(1073742336,ee.e,ee.e,[]),s.Bb(1073742336,ve.c,ve.c,[]),s.Bb(1073742336,te.d,te.d,[]),s.Bb(1073742336,Ce.d,Ce.d,[]),s.Bb(1073742336,Ce.c,Ce.c,[]),s.Bb(1073742336,ae.j,ae.j,[]),s.Bb(1073742336,ie.m,ie.m,[]),s.Bb(1073742336,Ue.b,Ue.b,[]),s.Bb(1073742336,se.i,se.i,[]),s.Bb(1073742336,se.f,se.f,[]),s.Bb(1073742336,Se.c,Se.c,[]),s.Bb(1073742336,Oe.e,Oe.e,[]),s.Bb(1073742336,we.c,we.c,[]),s.Bb(1073742336,ke.d,ke.d,[]),s.Bb(1073742336,ne.d,ne.d,[]),s.Bb(1073742336,Ie.h,Ie.h,[]),s.Bb(1073742336,ye.b,ye.b,[]),s.Bb(1073742336,Ge.c,Ge.c,[]),s.Bb(1073742336,je.e,je.e,[]),s.Bb(1073742336,Le.c,Le.c,[]),s.Bb(1073742336,xe.b,xe.b,[]),s.Bb(1073742336,le.a,le.a,[]),s.Bb(1073742336,re.e,re.e,[]),s.Bb(1073742336,oe.e,oe.e,[]),s.Bb(1073742336,oe.c,oe.c,[]),s.Bb(1073742336,be.d,be.d,[]),s.Bb(1073742336,qe.c,qe.c,[]),s.Bb(1073742336,Fe.a,Fe.a,[]),s.Bb(1073742336,Z.k,Z.k,[]),s.Bb(1073742336,Re.a,Re.a,[]),s.Bb(1073742336,Te.a,Te.a,[]),s.Bb(1073742336,Ae.a,Ae.a,[]),s.Bb(1073742336,ze.a,ze.a,[]),s.Bb(1073742336,Ne.a,Ne.a,[]),s.Bb(1073742336,Ee.a,Ee.a,[]),s.Bb(1073742336,Je.a,Je.a,[]),s.Bb(1073742336,We.a,We.a,[]),s.Bb(1073742336,Ve.a,Ve.a,[]),s.Bb(1073742336,_e.a,_e.a,[]),s.Bb(1073742336,He.a,He.a,[]),s.Bb(1073742336,Xe.a,Xe.a,[]),s.Bb(1073742336,Ye.a,Ye.a,[]),s.Bb(1073742336,Qe.a,Qe.a,[]),s.Bb(1073742336,Ze.a,Ze.a,[]),s.Bb(1073742336,Ke.a,Ke.a,[]),s.Bb(1073742336,$e.a,$e.a,[]),s.Bb(1073742336,et.a,et.a,[]),s.Bb(1073742336,tt.a,tt.a,[]),s.Bb(1073742336,at.a,at.a,[]),s.Bb(1073742336,st.a,st.a,[]),s.Bb(1073742336,it.a,it.a,[]),s.Bb(1073742336,nt.a,nt.a,[]),s.Bb(1073742336,he.a,he.a,[]),s.Bb(1073742336,rt.a,rt.a,[]),s.Bb(1073742336,p,p,[]),s.Bb(256,ie.e,oe.b,[]),s.Bb(1024,W.n,function(){return[[{path:"",component:J,pathMatch:"full"}]]},[])])})}}]);