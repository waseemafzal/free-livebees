(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"9WrJ":function(t,n,e){"use strict";e.r(n),e.d(n,"ProfileModule",(function(){return Qn})),e.d(n,"provideProfileSettingsManager",(function(){return Xn}));var i=e("tyNb"),o=e("FKr1"),s=e("iadO"),r=e("mrSG"),a=e("fXoL"),c=e("N1MX"),l=e("33+q"),g=e("1L/w"),d=e("Oewx"),b=e("ewsj"),h=e("rAHu"),u=e("qFsG"),p=e("dNgK"),f=e("yCtX"),m=e("DH7j"),M=e("7o/Q"),C=e("l7GE"),P=e("ZUHj"),v=e("Lhse");class k{constructor(t){this.resultSelector=t}call(t,n){return n.subscribe(new S(t,this.resultSelector))}}class S extends M.a{constructor(t,n,e=Object.create(null)){super(t),this.iterators=[],this.active=0,this.resultSelector="function"==typeof n?n:null,this.values=e}_next(t){const n=this.iterators;Object(m.a)(t)?n.push(new y(t)):n.push("function"==typeof t[v.a]?new O(t[v.a]()):new x(this.destination,this,t))}_complete(){const t=this.iterators,n=t.length;if(this.unsubscribe(),0!==n){this.active=n;for(let e=0;e<n;e++){let n=t[e];n.stillUnsubscribed?this.destination.add(n.subscribe(n,e)):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,n=t.length,e=this.destination;for(let s=0;s<n;s++){let n=t[s];if("function"==typeof n.hasValue&&!n.hasValue())return}let i=!1;const o=[];for(let s=0;s<n;s++){let n=t[s],r=n.next();if(n.hasCompleted()&&(i=!0),r.done)return void e.complete();o.push(r.value)}this.resultSelector?this._tryresultSelector(o):e.next(o),i&&e.complete()}_tryresultSelector(t){let n;try{n=this.resultSelector.apply(this,t)}catch(e){return void this.destination.error(e)}this.destination.next(n)}}class O{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return t&&t.done}}class y{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[v.a](){return this}next(t){const n=this.index++;return n<this.length?{value:this.array[n],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class x extends C.a{constructor(t,n,e){super(t),this.parent=n,this.observable=e,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[v.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t,n,e,i,o){this.buffer.push(n),this.parent.checkIterators()}subscribe(t,n){return Object(P.a)(this,this.observable,this,n)}}var w=e("LRne"),I=e("vkgz"),_=e("CqXF"),A=e("JIr8"),F=e("wd/R");let T=(()=>{class t{constructor(t,n){this.settingsManager=n,this.sectionId=this.settingsManager.getProfileSectionId(),this.user=t.authenticatedUser}getSocialAccounts(){if(!this.socialAccounts){let t=this.settingsManager.getSocialServices(this.sectionId),n=new Array;t&&(t.forEach((t,e)=>{let i=this.settingsManager.getSocialType(this.sectionId,e.toString()),o=this.user.socialAccounts.get(i),s={type:i,icon:this.settingsManager.getSocialIcon(this.sectionId,e.toString()),onColor:this.settingsManager.getSocialOnColor(this.sectionId,e.toString()),text:this.settingsManager.getSocialText(this.sectionId,e.toString()),url:o};n.push(s)}),this.socialAccounts=n.sort((t,n)=>t.url&&!n.url?-1:!t.url&&n.url?1:0))}return this.socialAccounts}getSocialAccountsForAPI(){let t={};return this.socialAccounts&&this.socialAccounts.forEach(n=>{n.url&&(t[n.type]=n.url)}),t}}return t.\u0275fac=function(n){return new(n||t)(a.Wb(c.AuthService),a.Wb(h.ProfileSettingsManager))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac}),t})();var R=e("ofXK"),B=e("3Pt+"),L=e("kmnG"),H=e("wWjk"),E=e("d3UM"),N=e("etuB"),j=e("z0ap");function U(t,n){if(1&t){const t=a.Tb();a.Sb(0,"mat-form-field"),a.Sb(1,"textarea",8),a.Zb("keydown",(function(){return a.vc(t),a.dc(4).resetErrorForm()})),a.Jc(2),a.Rb(),a.Rb()}if(2&t){const t=a.dc().$implicit,n=a.dc(3);a.Ab(1),a.kc("gbFontStyle",n.infosFont)("formControlName",t.id),a.Ab(1),a.Kc(t.value)}}function D(t,n){if(1&t&&(a.Sb(0,"mat-option",11),a.Jc(1),a.Rb()),2&t){const t=n.$implicit;a.kc("value",t.key),a.Ab(1),a.Kc(t.value)}}function G(t,n){if(1&t&&(a.Sb(0,"mat-form-field"),a.Sb(1,"mat-select",9),a.Hc(2,D,2,2,"mat-option",10),a.Rb(),a.Rb()),2&t){const t=a.dc().$implicit,n=a.dc(3);a.Ab(1),a.kc("formControlName",t.id)("gbFontStyle",n.infosFont),a.Ab(1),a.kc("ngForOf",t.options)}}function z(t,n){if(1&t&&(a.Sb(0,"mat-form-field"),a.Nb(1,"input",12),a.Rb()),2&t){const t=a.dc().$implicit,n=a.dc(3);a.Ab(1),a.kc("type",t.type)("formControlName",t.id)("gbFontStyle",n.infosFont)}}function J(t,n){if(1&t){const t=a.Tb();a.Sb(0,"mat-form-field"),a.Sb(1,"input",13,14),a.Zb("click",(function(){return a.vc(t),a.rc(5).open()}))("focus",(function(){return a.vc(t),a.rc(5).open()})),a.Rb(),a.Nb(3,"mat-datepicker-toggle",15),a.Nb(4,"mat-datepicker",null,16),a.Rb()}if(2&t){const t=a.rc(5),n=a.dc().$implicit,e=a.dc(3);a.Ab(1),a.kc("matDatepicker",t)("formControlName",n.id)("gbFontStyle",e.infosFont),a.Ab(2),a.kc("for",t)}}function K(t,n){if(1&t&&(a.Sb(0,"div",5),a.Sb(1,"label",6),a.Jc(2),a.Rb(),a.Hc(3,U,3,3,"mat-form-field",7),a.Hc(4,G,3,3,"mat-form-field",7),a.Hc(5,z,2,3,"mat-form-field",7),a.Hc(6,J,6,4,"mat-form-field",7),a.Rb()),2&t){const t=n.$implicit,e=a.dc(3);a.Eb("ng-invalid",e.checkFieldValidState(t.id)),a.kc("ngSwitch",t.fieldType),a.Ab(2),a.Kc(t.placeholder),a.Ab(1),a.kc("ngSwitchCase",e.fieldTypes.Paragraph),a.Ab(1),a.kc("ngSwitchCase",e.fieldTypes.Dropdown),a.Ab(1),a.kc("ngSwitchCase",e.fieldTypes.Text),a.Ab(1),a.kc("ngSwitchCase",e.fieldTypes.Date)}}function V(t,n){if(1&t&&(a.Sb(0,"div"),a.Hc(1,K,7,8,"div",4),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.kc("ngForOf",t.fields)}}function Z(t,n){if(1&t){const t=a.Tb();a.Sb(0,"div",17),a.Sb(1,"a",18),a.Zb("click",(function(){return a.vc(t),a.dc(2).onCancel()})),a.Rb(),a.Nb(2,"button",19),a.Rb()}if(2&t){const t=a.dc(2);a.Ab(1),a.kc("href",t.navigation.previousPageUrl,a.yc)("buttonLevel",t.cancelButtonLevel)("buttonSettings",t.cancelButtonSettings)("buttonTitle",t.cancelText),a.Ab(1),a.kc("buttonLevel",t.saveButtonLevel)("buttonSettings",t.saveButtonSettings)("buttonTitle",t.saveText)}}function $(t,n){if(1&t){const t=a.Tb();a.Sb(0,"form",1),a.Zb("ngSubmit",(function(){return a.vc(t),a.dc().onSubmit()})),a.Hc(1,V,2,1,"div",2),a.Hc(2,Z,3,7,"div",3),a.Rb()}if(2&t){const t=a.dc();a.Eb("error",t.errorForm),a.kc("formGroup",t.form),a.Ab(1),a.kc("ngIf",t.fields),a.Ab(1),a.kc("ngIf",!t.platform.isMobileSize())}}let W=(()=>{class t{constructor(t,n,e,i,o,s,r,l,g,d,b){this.platform=t,this.fieldsManager=n,this.languagesManager=e,this.linksBuilder=i,this.settingsManager=o,this.socialManager=s,this.userManager=r,this.snackBar=l,this.navigation=g,this.navbar=d,this.loadingService=b,this.profileSaved=new a.n,this.fieldTypes=c.FieldType,this.snackbarConfig=new p.b,this.subscriptions=new Array,this.cancelButtonLevel=3,this.saveButtonLevel=1,this.snackbarConfig.duration=3e3}ngOnInit(){this.setProfileSettings();const t=this.navbar.okButtonClicked.subscribe(()=>this.onSubmit());this.subscriptions.push(t)}ngAfterViewInit(){this.textAreas.length>0&&this.textAreas.forEach(t=>{t.resizeToFitContent(!0)})}setProfileSettings(){this.cancelText=this.languagesManager.getCancel(),this.cancelButtonSettings=this.settingsManager.getProfileEditCancelButton(this.sectionId,this.cancelButtonLevel),this.saveButtonSettings=this.settingsManager.getProfileEditSaveButton(this.sectionId,this.saveButtonLevel),this.entitledFont=this.settingsManager.getEntitledFont(this.sectionId),this.infosFont=this.settingsManager.getSectionsInfosFont(this.sectionId,"primary2Color"),this.opacity=this.settingsManager.getSectionsListBackgroundOpacity(this.sectionId),this.separatorColor=this.settingsManager.getSectionsSeparatorColor(this.sectionId),this.separatorStyle=Object(c.borderStyleBySeparatorType)(this.settingsManager.getSectionsSeparatorType(this.sectionId)),this.saveText=this.languagesManager.getProfileSave(),this.fields=this.fieldsManager.getPrivateFields(),this.form=this.fieldsManager.toFormGroup(this.fields),this.profileLink=this.linksBuilder.getSectionRouterLink(this.sectionId)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}onCancel(){return this.navigation.goBack(),!1}onSubmit(){if(this.resetErrorForm(),this.form.valid)if(this.platform.isPreviewApp)this.platform.previewService.notAllowedInPreview();else{let t,n,e,i={};for(let a in this.form.value){let o=this.fieldsManager.getJsonUserInfoField(a,this.form.value[a]);if(8===o.fieldType)t=this.form.value[a];else if(2===o.fieldType)e=this.form.value[a];else if(5===o.fieldType)n=this.form.value[a];else{if(9===o.fieldType){const t=this.formatDateFieldValue(o.value);o.value=t||""}i[a]={name:o.name,value:o.value,type:o.type}}}i=Object.assign(Object.assign({},i),this.fieldsManager.getHiddenFields());let o,s=this.socialManager.getSocialAccountsForAPI();const r=this.userManager.updateUser(this.user,t,n,e,i,s);o=this.fieldsManager.photoSrc?function(...t){const n=t[t.length-1];return"function"==typeof n&&t.pop(),Object(f.a)(t,void 0).lift(new k(n))}(r,this.userManager.updatePhoto(this.fieldsManager.photoSrc).pipe(Object(I.a)(()=>this.fieldsManager.photoSrc=null))):r,this.loadingService.showCircleLoadingOverlay(null),o.pipe(Object(_.a)(this.languagesManager.getProfileSaved()),Object(A.a)(t=>Object(w.a)(t))).subscribe(t=>{this.profileSaved.emit(),this.snackBar.open(t,null,this.snackbarConfig)},null,()=>this.loadingService.hideLoadingOverlay())}else this.errorForm=!0}resetErrorForm(){this.errorForm=!1}checkFieldValidState(t){return this.form.get(t).invalid}formatDateFieldValue(t){return F.isMoment(t)?t.format("YYYY-MM-DD"):t}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(c.PlatformService),a.Mb(h.ProfileFieldsManager),a.Mb(c.LanguagesManager),a.Mb(c.LinksBuilder),a.Mb(h.ProfileSettingsManager),a.Mb(T),a.Mb(c.AuthUserManager),a.Mb(p.a),a.Mb(c.NavigationManager),a.Mb(b.d),a.Mb(c.LoadingService))},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-fields-edit"]],viewQuery:function(t,n){var e;1&t&&a.Oc(u.d,!0),2&t&&a.qc(e=a.ac())&&(n.textAreas=e)},inputs:{sectionId:"sectionId",user:"user"},outputs:{profileSaved:"profileSaved"},decls:1,vars:1,consts:[[3,"formGroup","error","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[4,"ngIf"],["class","buttons",4,"ngIf"],["class","field",3,"ngSwitch","ng-invalid",4,"ngFor","ngForOf"],[1,"field",3,"ngSwitch"],[1,"field-label"],[4,"ngSwitchCase"],["matInput","","mat-autosize","","matAutosizeMinRows","2",3,"gbFontStyle","formControlName","keydown"],["panelClass","multiline-option-enabled",1,"multiline-select",3,"formControlName","gbFontStyle"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","",3,"type","formControlName","gbFontStyle"],["readonly","","matInput","",3,"matDatepicker","formControlName","gbFontStyle","click","focus"],["dateInput",""],["matSuffix","",3,"for"],["datePicker",""],[1,"buttons"],["gbButtonV2","",1,"button","cancel",3,"gbNavigationWithoutAnimationLink","href","buttonLevel","buttonSettings","buttonTitle","click"],["type","submit","gbButtonV2","",1,"button",3,"buttonLevel","buttonSettings","buttonTitle"]],template:function(t,n){1&t&&a.Hc(0,$,3,5,"form",0),2&t&&a.kc("ngIf",n.form)},directives:[R.t,B.J,B.u,B.l,R.s,R.x,R.y,L.c,u.b,u.d,B.d,H.a,B.t,B.j,E.a,o.n,s.b,s.d,L.j,s.a,N.a,j.a],styles:["[_nghost-%COMP%]{position:relative;display:block}[_nghost-%COMP%]     form.error .ng-invalid .field-label{color:#f44336}[_nghost-%COMP%]     form.error .ng-invalid .mat-form-field-underline{border-top-color:#f44336}[_nghost-%COMP%]     form.error .ng-invalid .mat-form-field-underline .mat-form-field-ripple.mat-warn{color:#f44336}[_nghost-%COMP%]     form.error .ng-invalid input.select-dropdown{border-bottom-color:#f44336}.field[_ngcontent-%COMP%]{padding:10px 30px}.field[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.field[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.field[_ngcontent-%COMP%]     .mat-select-value{color:inherit}.field[_ngcontent-%COMP%]     mat-form-field-label.mat-focused{color:#222}.field[_ngcontent-%COMP%]     .mat-form-field-underline .mat-form-field-ripple{background-color:#222}.field[_ngcontent-%COMP%]     mat-select:focus:not(.mat-select-disabled) .mat-select-trigger{color:#222;border-color:#222}.field[_ngcontent-%COMP%]     mat-select:focus:not(.mat-select-disabled) .mat-select-underline{background-color:#222}.field[_ngcontent-%COMP%]     mat-select:focus:not(.mat-select-disabled) .mat-select-arrow{color:#222}.field[_ngcontent-%COMP%]   .field-label[_ngcontent-%COMP%]{color:rgba(0,0,0,.6)}.buttons[_ngcontent-%COMP%]{margin-top:24px;display:flex;justify-content:flex-end;padding:0 30px}.buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{text-transform:uppercase;margin-left:8px}.buttons[_ngcontent-%COMP%]   .button.cancel[_ngcontent-%COMP%]{transition:background .4s cubic-bezier(.25,.8,.25,1)}"]}),Object(r.b)([Object(l.PreviewListener)("sections")],t.prototype,"setProfileSettings",null),t})();var q=e("0IaG"),Q=e("bTqV"),X=e("UfSN");function Y(t,n){if(1&t&&(a.Sb(0,"div",9),a.Jc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Kc(t.errorText)}}function tt(t,n){if(1&t){const t=a.Tb();a.Sb(0,"form",1),a.Zb("ngSubmit",(function(){return a.vc(t),a.dc().onSubmit()})),a.Sb(1,"div",2),a.Sb(2,"mat-form-field",3),a.Nb(3,"input",4),a.Rb(),a.Hc(4,Y,2,1,"div",5),a.Rb(),a.Sb(5,"div",6),a.Sb(6,"button",7),a.Zb("click",(function(){return a.vc(t),a.dc().dialogRef.close(!1)})),a.Jc(7),a.Rb(),a.Sb(8,"button",8),a.Jc(9),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=a.dc();a.kc("formGroup",t.form),a.Ab(2),a.kc("color",t.accountUrl.valid?null:"warn"),a.Ab(1),a.Ec("font-size",t.textFont.desktopSize,"px")("font-family",t.textFont.fontType),a.kc("placeholder",t.dialogText)("formControl",t.accountUrl),a.Ab(1),a.kc("ngIf",!t.accountUrl.valid),a.Ab(2),a.Ec("background-color",t.buttonTextColor)("color",t.buttonBackgroundColor),a.Ab(1),a.Kc(t.dialogCancel),a.Ab(1),a.Ec("background-color",t.buttonBackgroundColor)("color",t.buttonTextColor),a.kc("gbGradient",t.buttonBackgroundColorGradient),a.Ab(1),a.Kc(t.dialogConfirm)}}let nt=(()=>{class t{constructor(t,n,e){this.dialogRef=t,this.formBuilder=n,this.languagesManager=e,this.accountUrl=new B.h("",this.socialAccountValidator())}ngOnInit(){this.dialogCancel=this.languagesManager.getCancel(),this.dialogConfirm=this.languagesManager.getOk(),this.dialogText=this.getSocialAccountUsernameText(),this.errorText=this.languagesManager.getProfileAccountUrlError(),this.form=this.formBuilder.group({accountUrl:this.accountUrl})}onSubmit(){this.accountUrl.valid&&this.dialogRef.close(this.accountUrl.value)}getSocialAccountUsernameText(){switch(this.account.type){case"facebook":return this.languagesManager.getProfileUsernameFacebook();case"googleplus":return this.languagesManager.getProfileUsernameGooglek();case"instagram":return this.languagesManager.getProfileUsernameInstagram();case"linkedin":return this.languagesManager.getProfileUsernameLinkedIn();case"twitter":return this.languagesManager.getProfileUsernameTwitter();case"pinterest":return this.languagesManager.getProfileUsernamePinterest();default:return""}}socialAccountValidator(){return t=>{const n=t.value;return encodeURIComponent(n)===n?null:{error:null}}}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(q.i),a.Mb(B.g),a.Mb(c.LanguagesManager))},t.\u0275cmp=a.Gb({type:t,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"content"],[3,"color"],["matInput","",3,"placeholder","formControl"],["class","error-message",4,"ngIf"],[1,"buttons"],["mat-button","","type","button",3,"click"],["mat-button","","type","submit",3,"gbGradient"],[1,"error-message"]],template:function(t,n){1&t&&a.Hc(0,tt,10,20,"form",0),2&t&&a.kc("ngIf",n.form)},directives:[R.t,B.J,B.u,B.l,L.c,u.b,B.d,B.t,B.i,Q.b,X.a],styles:[".content[_ngcontent-%COMP%]{margin-bottom:24px}.content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:320px;color:#222}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:12px;text-transform:uppercase}.mat-form-field-label.mat-focused[_ngcontent-%COMP%]{color:#222}.mat-form-field-underline[_ngcontent-%COMP%]   .mat-form-field-ripple[_ngcontent-%COMP%]{background-color:#222}form.ng-invalid[_ngcontent-%COMP%]     label.mat-form-field-label{color:#f44336}form.ng-invalid[_ngcontent-%COMP%]     .mat-form-field-underline{border-top-color:#f44336}form.ng-invalid[_ngcontent-%COMP%]     .mat-form-field-underline .mat-form-field-ripple.mat-warn{color:#f44336}.error-message[_ngcontent-%COMP%]{font-size:75%;margin-top:-1em;color:#f44336;font-weight:600;font-family:Roboto,Helvetica Neue,sans-serif}"]}),t})();var et=e("EgQr"),it=e("ZCIf");function ot(t,n){1&t&&(a.Sb(0,"span",5),a.Jc(1,"+"),a.Rb())}function st(t,n){1&t&&(a.Sb(0,"span",6),a.Jc(1,"-"),a.Rb())}let rt=(()=>{class t{constructor(t,n,e,i){this.dialog=t,this.settingsManager=n,this.viewContainerRef=e,this.platform=i}ngOnInit(){this.buttonBackgroundColor=this.settingsManager.getEditButtonBackgroundColor(this.sectionId),this.buttonBackgroundColorGradient=this.settingsManager.getEditButtonBackgroundColorGradient(this.sectionId),this.buttonTextColor=this.settingsManager.getEditButtonTextColor(this.sectionId),this.subtitleFont=this.settingsManager.getSectionsSubtitleFont(this.sectionId,"primary2Color")}editSocialAccount(t){if(this.platform.isPreviewApp)this.platform.previewService.notAllowedInPreview();else if(t.url)t.url="";else{let t=new q.e;t.viewContainerRef=this.viewContainerRef;let n=this.dialog.open(nt,t);n.componentInstance.account=this.account,n.componentInstance.buttonBackgroundColor=this.buttonBackgroundColor,n.componentInstance.buttonBackgroundColorGradient=this.buttonBackgroundColorGradient,n.componentInstance.buttonTextColor=this.buttonTextColor,n.componentInstance.textFont=this.subtitleFont,n.afterClosed().subscribe(t=>{t&&(this.account.url=t)})}}getIconColor(t){return t.url?t.onColor:"#CCC"}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(q.b),a.Mb(h.ProfileSettingsManager),a.Mb(a.Q),a.Mb(c.PlatformService))},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-edit-social-account-icon"]],inputs:{account:"account",sectionId:"sectionId"},decls:5,vars:8,consts:[[1,"social"],["target","_blank","changeProperty","background-color",1,"icon-container",3,"gbHoverPantonizedColor","click"],["gbIcon","",1,"icon",3,"iconUrl","size","color"],["class","account-badge add",4,"ngIf"],["class","account-badge remove",4,"ngIf"],[1,"account-badge","add"],[1,"account-badge","remove"]],template:function(t,n){1&t&&(a.Sb(0,"div",0),a.Sb(1,"a",1),a.Zb("click",(function(){return n.editSocialAccount(n.account)})),a.Nb(2,"span",2),a.Hc(3,ot,2,0,"span",3),a.Hc(4,st,2,0,"span",4),a.Rb(),a.Rb()),2&t&&(a.Ab(1),a.Ec("background-color",n.getIconColor(n.account)),a.kc("gbHoverPantonizedColor",n.getIconColor(n.account)),a.Ab(1),a.kc("iconUrl",null==n.account.icon?null:n.account.icon.imageUrl)("size",20)("color","#FFFFFF"),a.Ab(1),a.kc("ngIf",!n.account.url),a.Ab(1),a.kc("ngIf",n.account.url))},directives:[et.a,it.a,R.t],styles:["[_nghost-%COMP%]{display:inline-block}.icon-container[_ngcontent-%COMP%]{position:relative;margin:10px;border-radius:50%;padding:10px;height:40px;width:40px;color:#fff;transition:background-color .4s ease}.icon-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:block}.icon-container[_ngcontent-%COMP%]   .account-badge[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:absolute;bottom:0;right:0;width:16px;height:16px;border-radius:50%;color:#fff;font-size:14px;font-weight:700;padding-left:1px;padding-bottom:1px}.icon-container[_ngcontent-%COMP%]   .account-badge.add[_ngcontent-%COMP%]{background-color:green}.icon-container[_ngcontent-%COMP%]   .account-badge.remove[_ngcontent-%COMP%]{background-color:red}.modal[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{text-align:right}"]}),t})();var at=e("VKYF"),ct=e("QRle"),lt=e("Cs6u"),gt=e("P52I");function dt(t,n){if(1&t&&(a.Sb(0,"div",15),a.ec(1,"backgroundimage"),a.Rb()),2&t){const t=a.dc();a.Ec("background-image",a.gc(1,2,t.photoPreviewSrc,t.user.urlPhoto))}}function bt(t,n){if(1&t&&a.Nb(0,"div",16),2&t){const t=a.dc();a.Ec("background-color",t.overlayColor),a.Eb("opacity",t.allowAvatar&&t.profilePhotoAsBanner)}}function ht(t,n){if(1&t&&(a.Sb(0,"div",17),a.ec(1,"backgroundimage"),a.Rb()),2&t){const t=a.dc();a.Ec("background-image",a.gc(1,2,t.photoPreviewSrc,t.userPhoto))}}function ut(t,n){if(1&t){const t=a.Tb();a.Sb(0,"button",18),a.Zb("tap",(function(){a.vc(t);const n=a.dc(),e=a.rc(12);return n.selectPicture(e)})),a.Rb()}if(2&t){const t=a.dc();a.kc("buttonLevel",t.editButtonLevel)("buttonSettings",t.editButtonSettings)("buttonTitle",t.changePhotoText)}}function pt(t,n){if(1&t&&a.Nb(0,"gb-profile-edit-social-account-icon",19),2&t){const t=n.$implicit,e=a.dc();a.kc("account",t)("sectionId",e.sectionId)}}let ft=(()=>{class t{constructor(t,n,e,i,o,s,r,c,l){this.anim=t,this.rootService=n,this.header=e,this.fieldsManager=i,this.languagesManager=o,this.platform=s,this.navigationManager=r,this.settingsManager=c,this.socialManager=l,this.disabledAnimation=!0,this.saveChanges=new a.n,this.editButtonLevel=1}get profileHeight(){return this.platform.isDesktopSize()?534+this.header.backgroundImageShiftHeight:440+this.header.backgroundImageShiftHeight}get contentHeight(){return`calc(100% - ${this.header.headerShiftHeight}px)`}ngOnInit(){this.isRTL=this.settingsManager.getSectionsIsRtl(this.sectionId),this.allowAvatar=this.settingsManager.getProfileAllowAvatar(this.sectionId),this.backgroundColor=this.settingsManager.getSectionsBackgroundColor(this.sectionId),this.editButtonSettings=this.settingsManager.getEditButton(this.sectionId,this.editButtonLevel),this.entitledFont=this.settingsManager.getEntitledFont(this.sectionId),this.overlayColor=this.settingsManager.getOverlayColor(this.sectionId),this.profilePhotoAsBanner=this.settingsManager.getProfilePhotoAsBanner(this.sectionId),this.subtitleFont=this.settingsManager.getSectionsSubtitleFont(this.sectionId,"primary2Color"),this.titleFont=this.settingsManager.getSectionsTitleFont(this.sectionId);const t=this.settingsManager.getSectionsListBackgroundOpacity(this.sectionId);this.listBackgroundColor=Object(c.hexToRgba)(this.settingsManager.getSectionsListBackgroundColor(this.sectionId),t),this.changePhotoText=this.languagesManager.getProfileChangePicture(),this.profileInfosText=this.languagesManager.getProfileInfos(),this.socialAccounts=this.socialManager.getSocialAccounts(),this.platformSubscription=this.platform.deviceChanged.subscribe(()=>{this.platform.isMobileSize()?(this.header.changeTitle(this.languagesManager.getProfileNavbarTitle()),this.header.changeTitleAlign("center")):(this.header.resetTitle(),this.header.resetTitleAlign())}),this.header.putOver()}ngOnDestroy(){this.header.resetTitle(),this.header.resetTitleAlign(),this.platformSubscription.unsubscribe()}onPreviewPhoto(t){if(0===t.length)return!1;this.photo=t.item(0),this.fieldsManager.selectedProfilePicture(this.photo).subscribe(t=>this.photoPreviewSrc=t)}onProfileSaved(){this.anim.disableComingAnimation(),this.navigationManager.goBack()}selectPicture(t){this.platform.isPreviewApp?this.platform.previewService.notAllowedInPreview():t.click()}get showPhoto(){return this.allowAvatar&&(this.user.urlPhoto||this.photoPreviewSrc)}get userPhoto(){return this.user.urlPhoto||Object(c.getStaticAssetFullUrl)("front-assets/img/default-avatar.png")}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(g.AnimationManager),a.Mb(d.a),a.Mb(b.a),a.Mb(h.ProfileFieldsManager),a.Mb(c.LanguagesManager),a.Mb(c.PlatformService),a.Mb(c.NavigationManager),a.Mb(h.ProfileSettingsManager),a.Mb(T))},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-edit-classic"]],hostVars:7,hostBindings:function(t,n){2&t&&(a.Gc("@.disabled",n.disabledAnimation),a.Ec("background-color",n.backgroundColor)("height",n.contentHeight),a.Eb("no-anim",n.disabledAnimation))},inputs:{sectionId:"sectionId",user:"user"},outputs:{saveChanges:"saveChanges"},decls:18,vars:20,consts:[[1,"profile"],["class","banner-photo",3,"background-image",4,"ngIf"],["class","banner-overlay",3,"background-color","opacity",4,"ngIf"],["gbBackgroundImageHeaderShift","",1,"profile-inner"],["class","photo",3,"background-image",4,"ngIf"],[1,"infos"],[1,"name",3,"gbFontStyle"],["gbLineClamp","2",1,"description",3,"gbFontStyle"],["gbButtonV2","","class","button-inline",3,"buttonLevel","buttonSettings","buttonTitle","tap",4,"ngIf"],["type","file","accept","image/*","id","upload-photo",3,"change"],["fileInput",""],[1,"social-icons"],[3,"account","sectionId",4,"ngFor","ngForOf"],[1,"profile-boxed",3,"gbDirRtl"],[3,"sectionId","user","profileSaved"],[1,"banner-photo"],[1,"banner-overlay"],[1,"photo"],["gbButtonV2","",1,"button-inline",3,"buttonLevel","buttonSettings","buttonTitle","tap"],[3,"account","sectionId"]],template:function(t,n){1&t&&(a.Sb(0,"div",0),a.Hc(1,dt,2,5,"div",1),a.Hc(2,bt,1,4,"div",2),a.Sb(3,"div",3),a.Hc(4,ht,2,5,"div",4),a.Sb(5,"div",5),a.Sb(6,"div",6),a.Jc(7),a.Rb(),a.Sb(8,"div",7),a.Jc(9),a.Rb(),a.Rb(),a.Hc(10,ut,1,3,"button",8),a.Sb(11,"input",9,10),a.Zb("change",(function(t){return n.onPreviewPhoto(t.target.files)})),a.Rb(),a.Sb(13,"div",11),a.Hc(14,pt,1,2,"gb-profile-edit-social-account-icon",12),a.Rb(),a.Rb(),a.Rb(),a.Sb(15,"div",13),a.ec(16,"async"),a.Sb(17,"gb-profile-fields-edit",14),a.Zb("profileSaved",(function(){return n.onProfileSaved()})),a.Rb(),a.Rb()),2&t&&(a.Ec("height",n.profileHeight,"px"),a.Ab(1),a.kc("ngIf",n.showPhoto&&n.profilePhotoAsBanner),a.Ab(1),a.kc("ngIf",n.showPhoto),a.Ab(2),a.kc("ngIf",n.allowAvatar),a.Ab(2),a.kc("gbFontStyle",n.titleFont),a.Ab(1),a.Kc(n.user.name),a.Ab(1),a.kc("gbFontStyle",n.subtitleFont),a.Ab(1),a.Kc(n.user.description),a.Ab(1),a.kc("ngIf",n.allowAvatar),a.Ab(4),a.kc("ngForOf",n.socialAccounts),a.Ab(1),a.Ec("background-color",n.listBackgroundColor),a.Eb("above-tabbar",a.fc(16,18,n.rootService.shouldDisplayTabBar("bottom"))),a.kc("gbDirRtl",n.isRTL),a.Ab(2),a.kc("sectionId",n.sectionId)("user",n.user))},directives:[R.t,at.a,H.a,ct.a,R.s,lt.a,W,N.a,rt],pipes:[R.b,gt.a],styles:["[_nghost-%COMP%]{display:block}.profile-boxed[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:640px;position:relative}.profile-boxed[_ngcontent-%COMP%]     .content{margin:40px 0}.profile-boxed.no-tabs[_ngcontent-%COMP%]{position:relative}.profile-boxed.no-tabs[_ngcontent-%COMP%]     .content{position:absolute;width:100%}.settings-icon[_ngcontent-%COMP%]{position:absolute;right:20px;top:20px;cursor:pointer;z-index:1;line-height:1}.social[_ngcontent-%COMP%]{margin-top:20px}.social[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{display:inline-block;margin:10px;border-radius:50%;padding:10px;height:40px;width:40px;color:#fff;transition:background-color .4s ease}.social[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.profile[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:534px}.profile[_ngcontent-%COMP%]   .banner-photo[_ngcontent-%COMP%]{-webkit-filter:blur(10px);filter:blur(10px);transform:scale(1.05);background-position:50%;background-size:cover}.profile[_ngcontent-%COMP%]   .banner-overlay[_ngcontent-%COMP%], .profile[_ngcontent-%COMP%]   .banner-photo[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute}.profile[_ngcontent-%COMP%]   .banner-overlay.opacity[_ngcontent-%COMP%]{opacity:.6}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;padding:0 20px;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{position:relative;width:160px;height:160px;flex-shrink:0;border-radius:50%;background-size:cover;background-position:50%}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   .settings-icon-photo[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;line-height:1}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{margin:20px auto;padding:0 20px;text-align:center;white-space:pre-wrap}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{text-transform:uppercase}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:1024px){.profile[_ngcontent-%COMP%]{height:440px}.profile-boxed[_ngcontent-%COMP%]{width:468px}.profile-boxed[_ngcontent-%COMP%]   .material-container[_ngcontent-%COMP%], .profile-boxed[_ngcontent-%COMP%]     .tabs-wrap{margin:0 auto}.profile-boxed[_ngcontent-%COMP%]     .content{margin:20px 0}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.profile[_ngcontent-%COMP%]{height:440px}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]{padding:0 10px}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{width:150px;height:150px}.profile-boxed[_ngcontent-%COMP%]{width:100%}.profile-boxed[_ngcontent-%COMP%]     .content{margin:0}.social[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{margin:9px}}","#upload-photo[_ngcontent-%COMP%]{visibility:hidden;width:0;height:0}[_nghost-%COMP%]     .social-icons{margin-top:20px}[_nghost-%COMP%]     .social-icons .social{position:relative;text-align:center;display:flex;flex-direction:row;justify-content:center}.profile-separator[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;height:56px;padding:0 20px;position:relative}.profile-separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 auto;width:640px;padding:0 30px;text-transform:uppercase}.profile-boxed[_ngcontent-%COMP%]{margin:40px auto;padding:20px 0}.profile-boxed.above-tabbar[_ngcontent-%COMP%]{margin-bottom:85px}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:1024px){.profile-boxed[_ngcontent-%COMP%]{margin:20px auto}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.profile-boxed[_ngcontent-%COMP%]{margin:0}}"]}),Object(r.b)([Object(l.PreviewListener)("sections")],t.prototype,"ngOnInit",null),t})();var mt=e("uHTR");function Mt(t,n){if(1&t&&a.Nb(0,"gb-profile-edit-classic",3),2&t){const t=a.dc(2);a.kc("sectionId",t.sectionId)("user",t.user)}}function Ct(t,n){if(1&t&&(a.Qb(0,1),a.Hc(1,Mt,1,2,"ng-template",2),a.Pb()),2&t){const t=a.dc();a.kc("ngSwitch",t.type),a.Ab(1),a.kc("ngSwitchCase",t.templateTypes.Classic)}}let Pt=(()=>{class t{constructor(t,n){this.authService=t,this.settingsManager=n,this.templateTypes=c.ProfileTemplateType,this.disableAnimation=!0}ngOnInit(){this.sectionId=this.settingsManager.getProfileSectionId(),this.type=this.settingsManager.getProfileTemplateType(this.sectionId),this.user=this.authService.authenticatedUser}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(c.AuthService),a.Mb(h.ProfileSettingsManager))},t.\u0275cmp=a.Gb({type:t,selectors:[["ng-component"]],hostVars:2,hostBindings:function(t,n){2&t&&a.Eb("no-anim",n.disableAnimation)},features:[a.zb([T])],decls:1,vars:1,consts:[[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"sectionId","user"]],template:function(t,n){1&t&&a.Hc(0,Ct,2,2,"ng-container",0),2&t&&a.kc("ngIf",n.user)},directives:[R.t,R.x,R.y,ft],encapsulation:2}),Object(r.b)([Object(mt.a)("sections")],t.prototype,"ngOnInit",null),t})();var vt=e("GJmQ"),kt=e("JX91"),St=e("eIep"),Ot=e("lJxs"),yt=e("jQ48"),xt=e("b7eX"),wt=e("o3HB"),It=e("OPlM"),_t=e("/+rk"),At=e("H/8N");function Ft(t,n){}function Tt(t,n){if(1&t&&(a.Sb(0,"a",2),a.Hc(1,Ft,0,0,"ng-template",3),a.Rb()),2&t){const t=a.dc(),n=a.rc(2);a.kc("gbNavigationLink",t.link),a.Ab(1),a.kc("ngTemplateOutlet",n)}}function Rt(t,n){if(1&t&&(a.Sb(0,"div"),a.Sb(1,"span",4),a.Jc(2),a.Rb(),a.Sb(3,"span",5),a.Jc(4),a.Rb(),a.Rb()),2&t){const t=a.dc();a.Ab(1),a.kc("gbFontStyle",t.titleFont),a.Ab(1),a.Kc(t.notification.message),a.Ab(1),a.kc("gbFontStyle",t.dateFont),a.Ab(1),a.Kc(t.notification.formattedDate)}}let Bt=(()=>{class t{constructor(t,n){this.linksBuilder=t,this.settingsManager=n}ngOnChanges(t){this.notification.sectionId&&this.notification.itemId&&(this.link=this.linksBuilder.getItemRouterLinkById(this.notification.sectionId,this.notification.itemId)),this.initSettings()}initSettings(){this.dateFont=this.settingsManager.getSectionsInfosFont(this.sectionId,"primary2Color"),this.titleFont=this.settingsManager.getEntitledFont(this.sectionId)}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(c.LinksBuilder),a.Mb(h.ProfileSettingsManager))},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-push-history-item"]],inputs:{notification:"notification",sectionId:"sectionId"},features:[a.yb],decls:3,vars:2,consts:[[3,"gbNavigationLink",4,"ngIf","ngIfElse"],["itemContent",""],[3,"gbNavigationLink"],[3,"ngTemplateOutlet"],[1,"push-message",3,"gbFontStyle"],[1,"push-date",3,"gbFontStyle"]],template:function(t,n){if(1&t&&(a.Hc(0,Tt,2,2,"a",0),a.Hc(1,Rt,5,4,"ng-template",null,1,a.Ic)),2&t){const t=a.rc(2);a.kc("ngIf",n.link)("ngIfElse",t)}},directives:[R.t,At.a,R.A,H.a],styles:["a[_ngcontent-%COMP%]{outline:none}div[_ngcontent-%COMP%]{display:flex;justify-content:space-between}div.clickable[_ngcontent-%COMP%]{cursor:pointer}span[_ngcontent-%COMP%]{width:45%;line-height:1.3;overflow:hidden}.push-message[_ngcontent-%COMP%]{font-size:18px!important;display:block}.push-date[_ngcontent-%COMP%]{font-size:14px!important;text-align:right;flex-shrink:0}[dir=rtl][_nghost-%COMP%]   .push-date[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .push-date[_ngcontent-%COMP%]{text-align:left}[dir=rtl][_nghost-%COMP%]   .push-message[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .push-message[_ngcontent-%COMP%]{text-align:right}"]}),Object(r.b)([Object(mt.a)("sections")],t.prototype,"initSettings",null),t})();function Lt(t,n){if(1&t&&(a.Sb(0,"li"),a.Nb(1,"gb-profile-push-history-item",3),a.Rb()),2&t){const t=n.$implicit,e=a.dc();a.Ab(1),a.kc("notification",t)("sectionId",e.sectionId)("gbDirRtl",e.isRTL)}}let Ht=(()=>{class t{constructor(t,n,e,i,o,s,r,a,c){this.anim=t,this.languagesManager=n,this.linksBuilder=e,this.navigation=i,this.settingsManager=o,this.pushHistory=s,this.loadMore=r,this.platform=a,this.drawer=c,this.currentPage=0}ngOnInit(){this.initSettings(),this.notifications=this.platform.isPreviewApp?this.pushHistory.getFakePushHistory().pipe(Object(Ot.a)(t=>t.list)):this.loadMore.notified.pipe(Object(vt.a)(()=>!this.reachedEnd),Object(kt.a)(void 0),Object(I.a)(t=>this.currentPage++),Object(St.a)(()=>this.pushHistory.getPushHistory(this.currentPage)),Object(I.a)(t=>this.reachedEnd=this.currentPage>=t.lastPageIndex),Object(Ot.a)(t=>t.list))}ngOnDestroy(){this.pushHistory.clearHistory()}initSettings(){this.sectionId=this.settingsManager.getProfileSectionId(),this.isRTL=this.settingsManager.getSectionsIsRtl(this.sectionId),this.backgroundColor=this.settingsManager.getSectionsListBackgroundColor(this.sectionId),this.headerTitle=this.languagesManager.getProfilePushNotifications(),this.settingsEnabled=this.settingsManager.getDisplayScheduledPush(this.sectionId)}closeSidenav(){this.drawer&&this.drawer.close()}openSettingsPanel(){this.goTo(this.linksBuilder.getProfilePushSettingsRouterLink(this.sectionId))}goTo(t){this.anim.disableComingAnimation(),this.navigation.navigateWithoutHistory(t)}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(yt.a),a.Mb(c.LanguagesManager),a.Mb(c.LinksBuilder),a.Mb(c.NavigationManager),a.Mb(h.ProfileSettingsManager),a.Mb(xt.a),a.Mb(c.LoadMoreManager),a.Mb(c.PlatformService),a.Mb(c.GBDrawerContainerComponent))},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-push-history"]],hostVars:2,hostBindings:function(t,n){2&t&&a.Ec("background-color",n.backgroundColor)},decls:4,vars:6,consts:[["leftIconUrl","close",3,"rightIconUrl","sectionId","title","clickLeft","clickRight"],["gbScrollable","","gbInfiniteScrollContentLoader",""],[4,"ngFor","ngForOf"],[3,"notification","sectionId","gbDirRtl"]],template:function(t,n){1&t&&(a.Sb(0,"gb-sidenav-header",0),a.Zb("clickLeft",(function(){return n.closeSidenav()}))("clickRight",(function(){return n.openSettingsPanel()})),a.Rb(),a.Sb(1,"ul",1),a.Hc(2,Lt,2,3,"li",2),a.ec(3,"async"),a.Rb()),2&t&&(a.kc("rightIconUrl",n.settingsEnabled?"profilsettings":null)("sectionId",n.sectionId)("title",n.headerTitle),a.Ab(2),a.kc("ngForOf",a.fc(3,4,n.notifications)))},directives:[wt.a,It.a,_t.a,R.s,Bt,lt.a],pipes:[R.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1;height:100%}ul[_ngcontent-%COMP%]{overflow-y:auto}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px;justify-content:space-between}@media only screen and (orientation:landscape) and (min-width:960px),only screen and (orientation:portrait) and (min-width:600px){ul[_ngcontent-%COMP%]{width:100%}}"]}),Object(r.b)([Object(mt.a)("sections")],t.prototype,"initSettings",null),t})();var Et=e("1jcm");function Nt(t,n){if(1&t&&(a.Sb(0,"li"),a.Nb(1,"gb-profile-push-setting-tree",4),a.Rb()),2&t){const t=n.$implicit;a.Ab(1),a.kc("setting",t)}}function jt(t,n){if(1&t&&(a.Sb(0,"ul",2),a.Hc(1,Nt,2,1,"li",3),a.Rb()),2&t){const t=a.dc();a.Ab(1),a.kc("ngForOf",t.setting.children)}}let Ut=(()=>{class t{constructor(t,n,e){this.cdr=t,this.platform=n,this.settingsManager=e}ngOnInit(){this.title=this.platform.isPreviewApp?this.setting.title:0===this.setting.subsectionId?this.settingsManager.getSectionsTitle(this.setting.sectionId):this.settingsManager.getSectionsSubsectionsTitle(this.setting.sectionId,this.setting.subsectionId)}onChange(t){this.checkTreeBranches(t)}checkTreeBranches(t){this.setting.enabled=t.checked,this.branches&&this.branches.forEach(n=>n.checkTreeBranches(t)),this.cdr.markForCheck()}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(a.h),a.Mb(c.PlatformService),a.Mb(c.SettingsManager))},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-push-setting-tree"]],viewQuery:function(n,e){var i;1&n&&a.Oc(t,!0),2&n&&a.qc(i=a.ac())&&(e.branches=i)},inputs:{setting:"setting"},decls:4,vars:3,consts:[["labelPosition","before",3,"checked","change"],["class","children",4,"ngIf"],[1,"children"],[4,"ngFor","ngForOf"],[3,"setting"]],template:function(t,n){1&t&&(a.Sb(0,"mat-slide-toggle",0),a.Zb("change",(function(t){return n.onChange(t)})),a.Sb(1,"span"),a.Jc(2),a.Rb(),a.Rb(),a.Hc(3,jt,2,1,"ul",1)),2&t&&(a.kc("checked",n.setting.enabled),a.Ab(2),a.Kc(n.title),a.Ab(1),a.kc("ngIf",n.setting.children&&n.setting.children.length>0))},directives:[Et.a,R.t,R.s,t],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]:not(.no-border){border-top:1px solid transparent}[_nghost-%COMP%]     mat-slide-toggle{display:inline-flex;padding:0 10px;margin:5px}[_nghost-%COMP%]     mat-slide-toggle label{align-items:center}[_nghost-%COMP%]     mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:rgba(76,217,100,.5)!important}[_nghost-%COMP%]     mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#4cd964!important}[_nghost-%COMP%]     mat-slide-toggle.mat-slide-toggle-focused .mat-ink-ripple{background-color:rgba(76,217,100,.26)!important}[_nghost-%COMP%]     mat-slide-toggle .mat-slide-toggle-content{margin-right:auto;white-space:normal;font-size:16px;color:#3d3d3d}.children[_ngcontent-%COMP%]{margin-left:20px}[dir=rtl][_nghost-%COMP%]   .children[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:0;margin-right:20px;padding-right:0}"]}),t})();function Dt(t,n){if(1&t&&(a.Sb(0,"li"),a.Nb(1,"gb-profile-push-setting-tree",8),a.Rb()),2&t){const t=n.$implicit,e=n.first;a.Ab(1),a.Eb("no-border",e),a.kc("setting",t)}}function Gt(t,n){if(1&t&&(a.Sb(0,"ul"),a.Hc(1,Dt,2,3,"li",7),a.ec(2,"async"),a.Rb()),2&t){const t=a.dc();a.Ab(1),a.kc("ngForOf",a.fc(2,1,t.settingsTree))}}let zt=(()=>{class t{constructor(t,n,e,i,o,s,r){this.anim=t,this.languagesManager=n,this.linksBuilder=e,this.platform=i,this.pushHistory=o,this.navigation=s,this.settingsManager=r}ngOnInit(){this.sectionId=this.settingsManager.getProfileSectionId(),this.isRTL=this.settingsManager.getSectionsIsRtl(this.sectionId),this.backgroundColor=Object(c.visibleColorFinder)(this.settingsManager.getSectionsListBackgroundColor(this.sectionId),this.settingsManager.getGeneralBackgroundColor(),"#ffffff"),this.buttonBackgroundColor=this.settingsManager.getEditButtonBackgroundColor(this.sectionId),this.buttonBackgroundColorGradient=this.settingsManager.getEditButtonBackgroundColorGradient(this.sectionId),this.buttonTextColor=this.settingsManager.getEditButtonTextColor(this.sectionId),this.settingsTitleColor=this.settingsManager.getSectionsInfosFont(this.sectionId,"primary2Color").color,this.saveText=this.languagesManager.getProfileSave(),this.settingsText=this.languagesManager.getProfileSettings(),this.settingsTitle=this.languagesManager.getProfilePushSettingsTitle(),this.setSettings()}setSettings(){if(this.platform.isPreviewApp){const t=Object(xt.c)().map(t=>this.translateSetting(t));this.settingsTree=Object(w.a)(t)}else this.settingsTree=this.pushHistory.getAutoPushSettings().pipe(Object(I.a)(t=>this.autoPushes=t),Object(St.a)(t=>this.pushHistory.getSettingsTree(t)))}translateSetting(t){return t.title&&(t.title=this.languagesManager.getLanguageByKey(t.title)),t.children.map(t=>this.translateSetting(t)),t}onClose(){this.anim.disableComingAnimation(),this.navigation.navigateWithoutHistory(this.linksBuilder.getProfilePushHistoryRouterLink(this.sectionId))}onSave(){if(this.platform.isPreviewApp)this.platform.previewService.notAllowedInPreview();else{const t=this.autoPushes.filter(t=>t.enabled).map(t=>t.id),n=this.autoPushes.filter(t=>!t.enabled).map(t=>t.id);this.pushHistory.saveAutoPushSubscriptions(t,n).subscribe(),this.onClose()}}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(yt.a),a.Mb(c.LanguagesManager),a.Mb(c.LinksBuilder),a.Mb(c.PlatformService),a.Mb(xt.a),a.Mb(c.NavigationManager),a.Mb(h.ProfileSettingsManager))},t.\u0275cmp=a.Gb({type:t,selectors:[["ng-component"]],decls:9,vars:15,consts:[[1,"settings"],["leftIconUrl","close",3,"sectionId","title","clickLeft"],[1,"settings-list",3,"gbDirRtl"],[1,"settings-title"],[1,"settings-block"],[4,"ngIf"],["mat-button","",3,"gbGradient","click"],[4,"ngFor","ngForOf"],[3,"setting"]],template:function(t,n){1&t&&(a.Sb(0,"div",0),a.Sb(1,"gb-sidenav-header",1),a.Zb("clickLeft",(function(){return n.onClose()})),a.Rb(),a.Sb(2,"div",2),a.Sb(3,"div",3),a.Jc(4),a.Rb(),a.Sb(5,"div",4),a.Hc(6,Gt,3,3,"ul",5),a.Rb(),a.Rb(),a.Sb(7,"button",6),a.Zb("click",(function(){return n.onSave()})),a.Jc(8),a.Rb(),a.Rb()),2&t&&(a.Ec("background-color",n.backgroundColor),a.Ab(1),a.kc("sectionId",n.sectionId)("title",n.settingsText),a.Ab(1),a.kc("gbDirRtl",n.isRTL),a.Ab(1),a.Ec("color",n.settingsTitleColor),a.Ab(1),a.Lc(" ",n.settingsTitle," "),a.Ab(2),a.kc("ngIf",n.settingsTree),a.Ab(1),a.Ec("background-color",n.buttonBackgroundColor)("color",n.buttonTextColor),a.kc("gbGradient",n.buttonBackgroundColor),a.Ab(1),a.Kc(n.saveText))},directives:[wt.a,lt.a,R.t,Q.b,X.a,R.s,Ut],pipes:[R.b],styles:[".settings[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.settings-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;position:relative;color:#3d3d3d;overflow-y:auto}.settings-title[_ngcontent-%COMP%]{padding:10px;font-size:14px;font-family:Helvetica Neue Light}.settings-block[_ngcontent-%COMP%]{background-color:#fff}button[_ngcontent-%COMP%]{text-transform:uppercase}"]}),Object(r.b)([Object(mt.a)("sections")],t.prototype,"ngOnInit",null),t})();var Jt=e("Aq8E");function Kt(t,n){if(1&t&&(a.Sb(0,"div",6),a.Jc(1),a.Rb()),2&t){const t=a.dc().$implicit,n=a.dc(2);a.kc("gbFontStyle",n.infosFont),a.Ab(1),a.Kc(t.value)}}function Vt(t,n){if(1&t){const t=a.Tb();a.Sb(0,"div",7),a.Zb("click",(function(){a.vc(t);const n=a.dc().$implicit;return a.dc(2).onClick(n)})),a.Jc(1),a.Rb()}if(2&t){const t=a.dc().$implicit,n=a.dc(2);a.kc("gbFontStyle",n.infosFont)("gbHoverFont",n.infosFont),a.Ab(1),a.Kc(t.value)}}function Zt(t,n){if(1&t&&(a.Sb(0,"div",2),a.Sb(1,"div",3),a.Jc(2),a.Rb(),a.Hc(3,Kt,2,2,"div",4),a.Hc(4,Vt,2,3,"div",5),a.Rb()),2&t){const t=n.$implicit,e=a.dc(2);a.Ec("border-bottom-color",e.separatorColor)("border-bottom-style",e.separatorStyle),a.Ab(1),a.kc("gbFontStyle",e.entitledFont),a.Ab(1),a.Kc(t.name),a.Ab(1),a.kc("ngIf",!t.isLink),a.Ab(1),a.kc("ngIf",t.isLink)}}function $t(t,n){if(1&t&&(a.Sb(0,"div"),a.Hc(1,Zt,5,8,"div",1),a.Rb()),2&t){const t=a.dc();a.Ec("background-color",t.listBackgroundColor),a.Ab(1),a.kc("ngForOf",t.privateFields)}}let Wt=(()=>{class t{constructor(t,n,e){this.settingsManager=t,this.languageManager=n,this.fieldsService=e}ngOnInit(){this.separatorColor=this.settingsManager.getSectionsSeparatorColor(this.sectionId),this.separatorStyle=Object(c.borderStyleBySeparatorType)(this.settingsManager.getSectionsSeparatorType(this.sectionId));const t=this.settingsManager.getSectionsListBackgroundOpacity(this.sectionId);this.listBackgroundColor=Object(c.hexToRgba)(this.settingsManager.getSectionsListBackgroundColor(this.sectionId),t),this.entitledFont=this.settingsManager.getEntitledFont(this.sectionId),this.infosFont=this.settingsManager.getSectionsInfosFont(this.sectionId,"primary2Color"),this.privateFields=this.fieldsService.getPrivateFields(this.user)}onClick(t){7===t.type&&Object(c.isEmail)(t.value)?location.href="mailto:"+t.value:4===t.type&&Object(c.isPhoneNumber)(t.value)&&(location.href="tel:"+t.value)}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(h.ProfileSettingsManager),a.Mb(c.LanguagesManager),a.Mb(h.ProfileFieldsService))},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-fields"]],inputs:{sectionId:"sectionId",user:"user"},decls:1,vars:1,consts:[[3,"background-color",4,"ngIf"],["class","field",3,"border-bottom-color","border-bottom-style",4,"ngFor","ngForOf"],[1,"field"],[1,"title",3,"gbFontStyle"],["class","info",3,"gbFontStyle",4,"ngIf"],["class","info link",3,"gbFontStyle","gbHoverFont","click",4,"ngIf"],[1,"info",3,"gbFontStyle"],[1,"info","link",3,"gbFontStyle","gbHoverFont","click"]],template:function(t,n){1&t&&a.Hc(0,$t,2,3,"div",0),2&t&&a.kc("ngIf",(null==n.privateFields?null:n.privateFields.length)>0)},directives:[R.t,R.s,H.a,Jt.a],styles:["[_nghost-%COMP%]{position:relative;display:block}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{padding:10px 0}.field[_ngcontent-%COMP%]{padding:10px 30px;border-bottom-width:1px}.field[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.field[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{transition:color .4s ease;white-space:pre-wrap}.field[_ngcontent-%COMP%]   .info.link[_ngcontent-%COMP%]{cursor:pointer}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:1024px){.field[_ngcontent-%COMP%]{padding:5px 10px}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]{margin-bottom:env(safe-area-inset-bottom)}.field[_ngcontent-%COMP%]{padding:5px 10px}}"]}),Object(r.b)([Object(l.PreviewListener)("sections")],t.prototype,"ngOnInit",null),t})();var qt=e("TE8h");let Qt=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-club-card-badge"]],inputs:{card:"card"},decls:2,vars:5,template:function(t,n){1&t&&(a.Sb(0,"div"),a.Jc(1),a.Rb()),2&t&&(a.Ec("background-color",n.card.backgroundColor)("color",n.card.fontColor),a.Ab(1),a.Kc(n.card.name))},styles:["div[_ngcontent-%COMP%]{padding:2px;border-radius:2px;text-transform:uppercase}"]}),t})();function Xt(t,n){if(1&t&&a.Nb(0,"gb-numeric-badge",10),2&t){const t=a.dc(2).$implicit,n=a.dc(2);a.Ec("background-color",n.editButtonBackgroundColor)("color",n.editButtonTextColor),a.kc("value",t.badge)("type",n.badgeType)}}function Yt(t,n){if(1&t&&a.Nb(0,"gb-profile-club-card-badge",11),2&t){const t=a.dc(2).$implicit;a.kc("card",t.card)}}function tn(t,n){if(1&t&&(a.Sb(0,"a",3),a.Sb(1,"div",4),a.Nb(2,"span",5,6),a.ec(4,"async"),a.Rb(),a.Sb(5,"div",7),a.Jc(6),a.Rb(),a.Hc(7,Xt,1,6,"gb-numeric-badge",8),a.Hc(8,Yt,1,1,"gb-profile-club-card-badge",9),a.Rb()),2&t){const t=a.rc(3),n=a.dc().$implicit,e=a.dc(2);a.Ec("border-bottom-color",e.separatorColor)("border-bottom-style",e.separatorStyle),a.kc("gbNavigationLink",n.link)("gbFontStyle",e.infosFont)("gbNavigationWithoutAnimationLink",n.animationDisabled)("skipNavigationHistory",null==n?null:n.skipHistory),a.Ab(2),a.kc("iconUrl",n.icon)("color",e.infosFont.color)("size",a.fc(4,16,e.iconSize)),a.Ab(3),a.kc("gbHoverFont",e.infosFont)("linkedIcon",t),a.Ab(1),a.Kc(n.title),a.Ab(1),a.kc("ngIf",n.badge),a.Ab(1),a.kc("ngIf",n.card)}}function nn(t,n){if(1&t&&(a.Qb(0),a.Hc(1,tn,9,18,"a",2),a.Pb()),2&t){const t=n.$implicit;a.Ab(1),a.kc("ngIf",!(null!=t&&t.disabled))}}function en(t,n){if(1&t&&(a.Sb(0,"div"),a.Hc(1,nn,2,1,"ng-container",1),a.Rb()),2&t){const t=a.dc();a.Ab(1),a.kc("ngForOf",t.accountLinks)}}let on=(()=>{class t{constructor(t,n){this.settingsManager=t,this.platform=n,this.badgeType=c.NumericBadgeType.Badge}ngOnInit(){this.setSettings(),this.iconSize=this.platform.deviceChanged.pipe(Object(Ot.a)(()=>this.platform.isDesktopSize()?30:24))}setSettings(){this.editButtonBackgroundColor=this.settingsManager.getEditButtonBackgroundColor(this.sectionId),this.editButtonTextColor=this.settingsManager.getEditButtonTextColor(this.sectionId),this.infosFont=this.settingsManager.getSectionsInfosFont(this.sectionId,"primary2Color");const t=this.settingsManager.getSectionsListBackgroundOpacity(this.sectionId);this.listBackgroundColor=Object(c.hexToRgba)(this.settingsManager.getSectionsListBackgroundColor(this.sectionId),t),this.separatorColor=this.settingsManager.getSectionsSeparatorColor(this.sectionId),this.separatorStyle=Object(c.borderStyleBySeparatorType)(this.settingsManager.getSectionsSeparatorType(this.sectionId))}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(h.ProfileSettingsManager),a.Mb(c.PlatformService))},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-account-links"]],hostVars:2,hostBindings:function(t,n){2&t&&a.Ec("background-color",n.listBackgroundColor)},inputs:{sectionId:"sectionId",accountLinks:"accountLinks"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","link","gbHoverFontTrigger","",3,"border-bottom-color","border-bottom-style","gbNavigationLink","gbFontStyle","gbNavigationWithoutAnimationLink","skipNavigationHistory",4,"ngIf"],["gbHoverFontTrigger","",1,"link",3,"gbNavigationLink","gbFontStyle","gbNavigationWithoutAnimationLink","skipNavigationHistory"],[1,"icon"],["gbIcon","",3,"iconUrl","color","size"],["icon","gbIcon"],[1,"title",3,"gbHoverFont","linkedIcon"],["class","badge",3,"value","type","background-color","color",4,"ngIf"],[3,"card",4,"ngIf"],[1,"badge",3,"value","type"],[3,"card"]],template:function(t,n){1&t&&a.Hc(0,en,2,1,"div",0),2&t&&a.kc("ngIf",n.accountLinks)},directives:[R.t,R.s,At.a,Jt.b,H.a,j.a,it.a,Jt.a,qt.a,Qt],pipes:[R.b],styles:["[_nghost-%COMP%]{position:relative;display:block}.link[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;height:75px;padding:10px;border-bottom-width:1px;cursor:pointer}.link[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.link[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:50px;padding:5px;display:flex;justify-content:center}.link[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   [gbIcon][_ngcontent-%COMP%]{display:inline-block}.link[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding:5px;flex:1}.link[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50%}.link[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%], .link[_ngcontent-%COMP%]   gb-profile-club-card-badge[_ngcontent-%COMP%]{margin-right:5px}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:1024px){.link[_ngcontent-%COMP%]{height:57px}.link[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{width:22px;height:22px;font-size:14px}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){[_nghost-%COMP%]{margin-bottom:env(safe-area-inset-bottom)}.link[_ngcontent-%COMP%]{height:57px}.link[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{width:22px;height:22px;font-size:14px}}"]}),Object(r.b)([Object(l.PreviewListener)("sections")],t.prototype,"setSettings",null),t})();var sn=e("sHql"),rn=e("Nn4q"),an=e("T6Kt");function cn(t,n){if(1&t){const t=a.Tb();a.Sb(0,"button",15),a.Zb("click",(function(){return a.vc(t),a.dc().openSettings()})),a.Nb(1,"span",16),a.Rb()}if(2&t){const t=a.dc();a.Ec("background-color",t.editButtonBackgroundColor),a.kc("gbHoverPantonizedColor",t.editButtonBackgroundColor),a.Ab(1),a.kc("size",24)("color",t.editButtonTextColor)}}function ln(t,n){if(1&t&&(a.Sb(0,"div",17),a.ec(1,"backgroundimage"),a.Rb()),2&t){const t=a.dc();a.Ec("background-image",a.fc(1,2,t.photoUrl))}}function gn(t,n){if(1&t){const t=a.Tb();a.Sb(0,"div",18),a.ec(1,"backgroundimage"),a.Sb(2,"button",19),a.Zb("click",(function(){return a.vc(t),a.dc().openSettings()})),a.Nb(3,"span",16),a.Rb(),a.Rb()}if(2&t){const t=a.dc();a.Ec("background-image",a.gc(1,8,t.photoUrl,t.defaultAvatar)),a.Ab(2),a.Ec("background-color",t.editButtonBackgroundColor),a.kc("gbHoverPantonizedColor",t.editButtonBackgroundColor)("gbGradient",t.editButtonBackgroundColorGradient),a.Ab(1),a.kc("size",24)("color",t.editButtonTextColor)}}function dn(t,n){if(1&t&&(a.Sb(0,"a",20),a.Nb(1,"span",21),a.Rb()),2&t){const t=n.$implicit;a.Ec("background-color",t.onColor),a.kc("gbHoverPantonizedColor",t.onColor)("href",t.url,a.yc),a.Ab(1),a.kc("iconUrl",null==t.icon?null:t.icon.imageUrl)("size",20)("color","#FFFFFF")}}function bn(t,n){if(1&t&&(a.Sb(0,"gb-tabs",22),a.Sb(1,"gb-tab",23),a.Nb(2,"gb-profile-account-links",24),a.Rb(),a.Sb(3,"gb-tab",25),a.Nb(4,"gb-profile-fields",26),a.Rb(),a.Rb()),2&t){const t=a.dc();a.kc("sectionId",t.sectionId),a.Ab(1),a.kc("title",t.myAccountText)("sectionId",t.sectionId)("gbDirRtl",t.isRTL),a.Ab(1),a.kc("sectionId",t.sectionId)("accountLinks",t.accountLinks),a.Ab(1),a.kc("title",t.myInfosText)("sectionId",t.sectionId)("gbDirRtl",t.isRTL),a.Ab(1),a.kc("sectionId",t.sectionId)("user",t.user)}}function hn(t,n){if(1&t&&(a.Sb(0,"div",27),a.Nb(1,"gb-profile-fields",26),a.Rb()),2&t){const t=a.dc();a.kc("gbDirRtl",t.isRTL),a.Ab(1),a.kc("sectionId",t.sectionId)("user",t.user)}}let un=(()=>{class t{constructor(t,n,e,i,o,s,r){this.header=t,this.languagesManager=n,this.linksBuilder=e,this.loyaltyDataManager=i,this.platform=o,this.navigation=s,this.settingsManager=r,this.editButtonLevel=1}get profileHeight(){return this.platform.isDesktopSize()?534+this.header.backgroundImageShiftHeight:440+this.header.backgroundImageShiftHeight}get contentHeight(){return`calc(100% - ${this.header.headerShiftHeight}px)`}ngOnInit(){this.setListSettings(),this.socialAccounts=this.getSocialAccounts(),this.accountLinks=this.getAccountLinks(),this.editProfileRouterLink=this.linksBuilder.getProfileEditRouterLink(this.sectionId),this.settingsProfileRouterLink=this.linksBuilder.getProfileSettingsRouterLink(this.sectionId),this.header.putOver(),this.platformSubscription=this.platform.deviceChanged.subscribe(()=>this.setShowAccountLinksTab())}ngOnDestroy(){this.platformSubscription&&this.platformSubscription.unsubscribe()}openSettings(){this.navigation.navigateWithoutHistory(this.settingsProfileRouterLink)}getSocialAccounts(){let t=this.settingsManager.getProfileSectionId(),n=this.settingsManager.getSocialServices(t),e=new Array;for(let i in n){let n=this.settingsManager.getSocialType(t,i),o=this.user.socialAccounts.get(n);if(o){let s={type:n,icon:this.settingsManager.getSocialIcon(t,i),onColor:this.settingsManager.getSocialOnColor(t,i),text:this.settingsManager.getSocialText(t,i),url:o};e.push(s)}}return e}getAccountLinks(){let t=new Array;const n=this.settingsManager.getMyCouponsSectionId(this.sectionId);n&&t.push({icon:"/assets/gbicon/img/v2/332.png",link:this.linksBuilder.getCouponingFavoritesRouterLink(n),title:this.languagesManager.getCouponProfileLink()});const e=this.settingsManager.getLoyaltySectionId();if(e){if(this.settingsManager.getSectionsLoyaltyClubCardEnabled(e)){let n={icon:"loyalty-clubcard",link:this.linksBuilder.getSectionRouterLink(e),title:this.languagesManager.getLoyaltyMyCard()};t.push(n),this.loyaltyDataManager.getAuthenticatedUserClubCard().subscribe(t=>{n.card=t})}let n={icon:"/assets/gbicon/img/v1/228.png",link:this.linksBuilder.getLoyaltyRewardsRouterLink(e),title:this.languagesManager.getLoyaltyMyGifts()};t.push(n),this.loyaltyDataManager.getAuthenticatedUserActiveGifts().subscribe(t=>n.badge=t.length)}const i=this.settingsManager.getChatSectionId();return i&&t.push({icon:"profil-messages",link:this.linksBuilder.getSectionRouterLink(i),title:this.languagesManager.getMyMessages()}),this.settingsManager.getDisplayPushHistory(this.sectionId)&&t.push({icon:"profil-push",link:this.linksBuilder.getProfilePushHistoryRouterLink(this.sectionId),title:this.languagesManager.getProfilePushNotifications(),animationDisabled:!0,skipHistory:!0}),t}setShowAccountLinksTab(){this.showTabs=!(!this.accountLinks||0===this.accountLinks.length)}setListSettings(){this.isRTL=this.settingsManager.getSectionsIsRtl(this.sectionId),this.allowAvatar=this.settingsManager.getProfileAllowAvatar(this.sectionId),this.backgroundColor=this.settingsManager.getSectionsBackgroundColor(this.sectionId),this.defaultAvatar="front-assets/img/default-avatar.png",this.editButtonBackgroundColor=this.settingsManager.getEditButtonBackgroundColor(this.sectionId),this.editButtonBackgroundColorGradient=this.settingsManager.getEditButtonBackgroundColorGradient(this.sectionId),this.editButtonTextColor=this.settingsManager.getEditButtonTextColor(this.sectionId),this.editButtonSettings=this.settingsManager.getEditButton(this.sectionId,this.editButtonLevel),this.editButtonText=this.languagesManager.getProfileEdit(),this.entitledFont=this.settingsManager.getEntitledFont(this.sectionId),this.myAccountText=this.languagesManager.getProfileMyAccount(),this.myInfosText=this.languagesManager.getProfileMyInfos(),this.overlayColor=this.settingsManager.getOverlayColor(this.sectionId),this.profilePhotoAsBanner=this.settingsManager.getProfilePhotoAsBanner(this.sectionId),this.subtitleFont=this.settingsManager.getSectionsSubtitleFont(this.sectionId,"primary2Color"),this.tabsBackgroundColor=this.settingsManager.getSectionsSortingNormalBackgroundColor(this.sectionId),this.titleFont=this.settingsManager.getSectionsTitleFont(this.sectionId),this.rootType=this.settingsManager.getRootType(),this.setShowAccountLinksTab()}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(b.a),a.Mb(c.LanguagesManager),a.Mb(c.LinksBuilder),a.Mb(sn.c),a.Mb(c.PlatformService),a.Mb(c.NavigationManager),a.Mb(h.ProfileSettingsManager))},t.\u0275cmp=a.Gb({type:t,selectors:[["gb-profile-list-classic"]],hostVars:4,hostBindings:function(t,n){2&t&&a.Ec("background-color",n.backgroundColor)("height",n.contentHeight)},inputs:{sectionId:"sectionId",user:"user",photoUrl:"photoUrl"},decls:18,vars:25,consts:[[1,"profile"],["mat-mini-fab","","class","settings-icon","changeProperty","background-color",3,"gbNavigationWithoutAnimationLink","background-color","gbHoverPantonizedColor","click",4,"ngIf"],["class","banner-photo",3,"background-image",4,"ngIf"],[1,"banner-overlay"],["gbBackgroundImageHeaderShift","",1,"profile-inner"],["class","photo",3,"background-image",4,"ngIf"],[1,"infos"],[1,"name",3,"gbFontStyle"],[1,"description",3,"gbFontStyle","gbLineClamp"],["gbButtonV2","",1,"button",3,"gbNavigationWithoutAnimationLink","buttonLevel","buttonSettings","buttonTitle","routerLink"],[1,"social"],["class","icon-container","target","_blank","changeProperty","background-color",3,"background-color","gbHoverPantonizedColor","href",4,"ngFor","ngForOf"],[1,"profile-boxed"],[3,"sectionId",4,"ngIf"],["class","content",3,"gbDirRtl",4,"ngIf"],["mat-mini-fab","","changeProperty","background-color",1,"settings-icon",3,"gbNavigationWithoutAnimationLink","gbHoverPantonizedColor","click"],["gbIcon","","iconUrl","profilsettings",3,"size","color"],[1,"banner-photo"],[1,"photo"],["mat-mini-fab","","changeProperty","background-color",1,"settings-icon-photo",3,"gbNavigationWithoutAnimationLink","gbHoverPantonizedColor","gbGradient","click"],["target","_blank","changeProperty","background-color",1,"icon-container",3,"gbHoverPantonizedColor","href"],["gbIcon","",3,"iconUrl","size","color"],[3,"sectionId"],["index","1",3,"title","sectionId","gbDirRtl"],[3,"sectionId","accountLinks"],["index","2",3,"title","sectionId","gbDirRtl"],[3,"sectionId","user"],[1,"content",3,"gbDirRtl"]],template:function(t,n){1&t&&(a.Sb(0,"div",0),a.Hc(1,cn,2,5,"button",1),a.Hc(2,ln,2,4,"div",2),a.Nb(3,"div",3),a.Sb(4,"div",4),a.Hc(5,gn,4,11,"div",5),a.Sb(6,"div",6),a.Sb(7,"div",7),a.Jc(8),a.Rb(),a.Sb(9,"div",8),a.Jc(10),a.Rb(),a.Rb(),a.Nb(11,"a",9),a.Sb(12,"div",10),a.Hc(13,dn,2,7,"a",11),a.Rb(),a.Rb(),a.Rb(),a.Sb(14,"div"),a.Sb(15,"div",12),a.Hc(16,bn,5,11,"gb-tabs",13),a.Hc(17,hn,2,3,"div",14),a.Rb(),a.Rb()),2&t&&(a.Ec("height",n.profileHeight,"px"),a.Ab(1),a.kc("ngIf",!n.allowAvatar),a.Ab(1),a.kc("ngIf",n.allowAvatar&&n.profilePhotoAsBanner),a.Ab(1),a.Ec("background-color",n.overlayColor),a.Eb("opacity",n.allowAvatar&&n.profilePhotoAsBanner),a.Ab(2),a.kc("ngIf",n.allowAvatar),a.Ab(2),a.kc("gbFontStyle",n.titleFont),a.Ab(1),a.Kc(n.user.displayName),a.Ab(1),a.kc("gbFontStyle",n.subtitleFont)("gbLineClamp",4),a.Ab(1),a.Kc(n.user.description),a.Ab(1),a.kc("buttonLevel",n.editButtonLevel)("buttonSettings",n.editButtonSettings)("buttonTitle",n.editButtonText)("routerLink",n.editProfileRouterLink),a.Ab(2),a.kc("ngForOf",n.socialAccounts),a.Ab(1),a.Ec("background-color",n.tabsBackgroundColor),a.Ab(1),a.Eb("no-tabs",!n.showTabs),a.Ab(1),a.kc("ngIf",n.showTabs),a.Ab(1),a.kc("ngIf",!n.showTabs))},directives:[R.t,at.a,H.a,ct.a,N.a,i.l,j.a,R.s,Q.b,et.a,it.a,X.a,rn.b,an.a,lt.a,on,Wt],pipes:[gt.a],styles:["[_nghost-%COMP%]{display:block}.profile-boxed[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:640px;position:relative}.profile-boxed[_ngcontent-%COMP%]     .content{margin:40px 0}.profile-boxed.no-tabs[_ngcontent-%COMP%]{position:relative}.profile-boxed.no-tabs[_ngcontent-%COMP%]     .content{position:absolute;width:100%}.settings-icon[_ngcontent-%COMP%]{position:absolute;right:20px;top:20px;cursor:pointer;z-index:1;line-height:1}.social[_ngcontent-%COMP%]{margin-top:20px}.social[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{display:inline-block;margin:10px;border-radius:50%;padding:10px;height:40px;width:40px;color:#fff;transition:background-color .4s ease}.social[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.profile[_ngcontent-%COMP%]{position:relative;overflow:hidden;height:534px}.profile[_ngcontent-%COMP%]   .banner-photo[_ngcontent-%COMP%]{-webkit-filter:blur(10px);filter:blur(10px);transform:scale(1.05);background-position:50%;background-size:cover}.profile[_ngcontent-%COMP%]   .banner-overlay[_ngcontent-%COMP%], .profile[_ngcontent-%COMP%]   .banner-photo[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute}.profile[_ngcontent-%COMP%]   .banner-overlay.opacity[_ngcontent-%COMP%]{opacity:.6}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;padding:0 20px;text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{position:relative;width:160px;height:160px;flex-shrink:0;border-radius:50%;background-size:cover;background-position:50%}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]   .settings-icon-photo[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;line-height:1}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{margin:20px auto;padding:0 20px;text-align:center;white-space:pre-wrap}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{text-transform:uppercase}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:1024px){.profile[_ngcontent-%COMP%]{height:440px}.profile-boxed[_ngcontent-%COMP%]{width:468px}.profile-boxed[_ngcontent-%COMP%]   .material-container[_ngcontent-%COMP%], .profile-boxed[_ngcontent-%COMP%]     .tabs-wrap{margin:0 auto}.profile-boxed[_ngcontent-%COMP%]     .content{margin:20px 0}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.profile[_ngcontent-%COMP%]{height:440px}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]{padding:0 10px}.profile[_ngcontent-%COMP%]   .profile-inner[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{width:150px;height:150px}.profile-boxed[_ngcontent-%COMP%]{width:100%}.profile-boxed[_ngcontent-%COMP%]     .content{margin:0}.social[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{margin:9px}}"]}),Object(r.b)([Object(l.PreviewListener)("sections")],t.prototype,"setListSettings",null),t})();function pn(t,n){if(1&t&&(a.Nb(0,"gb-profile-list-classic",3),a.ec(1,"async")),2&t){const t=a.dc(2);a.kc("sectionId",t.sectionId)("user",t.user)("photoUrl",a.fc(1,3,t.userPhotoUrl$))}}function fn(t,n){if(1&t&&(a.Qb(0,1),a.Hc(1,pn,2,5,"ng-template",2),a.Pb()),2&t){const t=a.dc();a.kc("ngSwitch",t.type),a.Ab(1),a.kc("ngSwitchCase",t.templateTypes.Classic)}}let mn=(()=>{class t{constructor(t,n){this.authService=t,this.settingsManager=n,this.templateTypes=c.ProfileTemplateType,this.disabledAnimation=!0}ngOnInit(){this.sectionId=this.settingsManager.getProfileSectionId(),this.type=this.settingsManager.getProfileTemplateType(this.sectionId),this.user=this.authService.authenticatedUser,this.userPhotoUrl$=this.authService.photoUpdated.pipe(Object(kt.a)(this.authService.authenticatedUser.urlPhoto),Object(Ot.a)(()=>this.authService.authenticatedUser.urlPhoto))}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(c.AuthService),a.Mb(h.ProfileSettingsManager))},t.\u0275cmp=a.Gb({type:t,selectors:[["ng-component"]],hostVars:2,hostBindings:function(t,n){2&t&&a.Eb("no-anim",n.disabledAnimation)},decls:1,vars:1,consts:[[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"sectionId","user","photoUrl"]],template:function(t,n){1&t&&a.Hc(0,fn,2,2,"ng-container",0),2&t&&a.kc("ngIf",n.user)},directives:[R.t,R.x,R.y,un],pipes:[R.b],encapsulation:2}),Object(r.b)([Object(mt.a)("sections")],t.prototype,"ngOnInit",null),t})(),Mn=(()=>{class t{constructor(t,n){this.dialogRef=t,this.languagesManager=n,this.dialogCancel=this.languagesManager.getCancel(),this.dialogConfirm=this.languagesManager.getOk(),this.dialogText=this.languagesManager.getProfileAccountWillBeDeleted(),this.dialogTitle=this.languagesManager.getProfileAccountDeletion()}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(q.i),a.Mb(c.LanguagesManager))},t.\u0275cmp=a.Gb({type:t,selectors:[["ng-component"]],decls:10,vars:17,consts:[[1,"content"],[3,"gbFontStyle"],[1,"buttons"],["mat-button","",3,"click"]],template:function(t,n){1&t&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Jc(2),a.Rb(),a.Sb(3,"div"),a.Jc(4),a.Rb(),a.Rb(),a.Sb(5,"div",2),a.Sb(6,"button",3),a.Zb("click",(function(){return n.dialogRef.close(!1)})),a.Jc(7),a.Rb(),a.Sb(8,"button",3),a.Zb("click",(function(){return n.dialogRef.close(!0)})),a.Jc(9),a.Rb(),a.Rb()),2&t&&(a.Ab(1),a.kc("gbFontStyle",n.titleFont),a.Ab(1),a.Kc(n.dialogTitle),a.Ab(1),a.Ec("font-size",n.textFont.desktopSize,"px")("font-family",n.textFont.fontType),a.Ab(1),a.Kc(n.dialogText),a.Ab(2),a.Ec("background-color",n.buttonTextColor)("color",n.buttonBackgroundColor),a.Ab(1),a.Kc(n.dialogCancel),a.Ab(1),a.Ec("background-color",n.buttonBackgroundColor)("color",n.buttonTextColor),a.Ab(1),a.Kc(n.dialogConfirm))},directives:[H.a,Q.b],styles:[".content[_ngcontent-%COMP%]{margin-bottom:24px;color:#3d3d3d}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:12px;text-transform:uppercase}"]}),t})();function Cn(t,n){if(1&t&&(a.Sb(0,"mat-error"),a.Jc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Kc(t.spacesInLoginError)}}function Pn(t,n){if(1&t&&(a.Sb(0,"mat-error"),a.Jc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Kc(t.minLengthError)}}function vn(t,n){if(1&t&&(a.Sb(0,"mat-error"),a.Jc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Kc(t.minLengthError)}}function kn(t,n){if(1&t&&(a.Sb(0,"mat-error"),a.Jc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Kc(t.minLengthError)}}function Sn(t,n){if(1&t&&(a.Sb(0,"mat-error"),a.Jc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Kc(t.spacesInPasswordError)}}function On(t,n){if(1&t&&(a.Sb(0,"mat-error"),a.Jc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Kc(t.fieldRequiredError)}}function yn(t,n){if(1&t&&(a.Sb(0,"mat-error"),a.Jc(1),a.Rb()),2&t){const t=a.dc(2);a.Ab(1),a.Kc(t.confirmPasswordNotTheSameError)}}function xn(t,n){if(1&t&&(a.Qb(0),a.Sb(1,"div",5),a.Sb(2,"span"),a.Jc(3),a.Rb(),a.Rb(),a.Sb(4,"div",6),a.Sb(5,"mat-slide-toggle",17),a.Sb(6,"span",18),a.Jc(7),a.Rb(),a.Rb(),a.Rb(),a.Pb()),2&t){const t=a.dc(2);a.Ab(1),a.Ec("background-color",t.overlayColor),a.Ab(1),a.Ec("color",null==t.titleFont?null:t.titleFont.color),a.Ab(1),a.Kc(t.contactRulesText),a.Ab(3),a.Ec("color",null==t.subtitleFont?null:t.subtitleFont.color),a.Ab(1),a.Kc(t.allowContactText)}}function wn(t,n){if(1&t){const t=a.Tb();a.Sb(0,"div",19),a.Zb("click",(function(){return a.vc(t),a.dc(2).openModal()})),a.Jc(1),a.Rb()}if(2&t){const t=a.dc(2);a.kc("gbFontStyle",t.deleteFont)("gbHoverFont",t.deleteFont),a.Ab(1),a.Kc(t.deleteAccountText)}}function In(t,n){if(1&t){const t=a.Tb();a.Sb(0,"form",3),a.Zb("ngSubmit",(function(){return a.vc(t),a.dc().onSubmit()})),a.Sb(1,"div",4),a.Sb(2,"div",5),a.Sb(3,"span"),a.Jc(4),a.Rb(),a.Rb(),a.Sb(5,"div",6),a.Sb(6,"mat-form-field"),a.Sb(7,"input",7),a.Zb("keydown",(function(){return a.vc(t),a.dc().resetErrorForm()})),a.Rb(),a.Hc(8,Cn,2,1,"mat-error",8),a.Rb(),a.Rb(),a.Sb(9,"div",5),a.Sb(10,"span"),a.Jc(11),a.Rb(),a.Rb(),a.Sb(12,"div",6),a.Sb(13,"button",9),a.Zb("click",(function(){return a.vc(t),a.dc().onChangePassword()})),a.Rb(),a.Sb(14,"div",10),a.Sb(15,"mat-form-field",11),a.Sb(16,"input",12),a.Zb("keydown",(function(){return a.vc(t),a.dc().resetErrorForm()})),a.Rb(),a.Hc(17,Pn,2,1,"mat-error",8),a.Rb(),a.Sb(18,"mat-form-field",11),a.Sb(19,"input",12),a.Zb("keydown",(function(){return a.vc(t),a.dc().resetErrorForm()})),a.Rb(),a.Hc(20,vn,2,1,"mat-error",8),a.Hc(21,kn,2,1,"mat-error",8),a.Hc(22,Sn,2,1,"mat-error",8),a.Rb(),a.Sb(23,"mat-form-field",11),a.Sb(24,"input",12),a.Zb("keydown",(function(){return a.vc(t),a.dc().resetErrorForm()})),a.Rb(),a.Hc(25,On,2,1,"mat-error",8),a.Hc(26,yn,2,1,"mat-error",8),a.Rb(),a.Rb(),a.Rb(),a.Hc(27,xn,8,8,"ng-container",8),a.Sb(28,"div",13),a.Sb(29,"div",14),a.Zb("click",(function(){return a.vc(t),a.dc().onLogout()})),a.Jc(30),a.Rb(),a.Hc(31,wn,2,3,"div",15),a.Rb(),a.Rb(),a.Nb(32,"button",16),a.Rb()}if(2&t){const t=a.dc();a.Eb("error",t.errorForm),a.kc("formGroup",t.form),a.Ab(2),a.Ec("background-color",t.overlayColor),a.Ab(1),a.Ec("color",null==t.titleFont?null:t.titleFont.color),a.Ab(1),a.Kc(t.loginText),a.Ab(3),a.Ec("color",null==t.subtitleFont?null:t.subtitleFont.color),a.kc("placeholder",t.loginText),a.Ab(1),a.kc("ngIf",t.form.get("login").hasError("pattern")),a.Ab(1),a.Ec("background-color",t.overlayColor),a.Ab(1),a.Ec("color",null==t.titleFont?null:t.titleFont.color),a.Ab(1),a.Kc(t.passwordText),a.Ab(2),a.Ec("color",null==t.titleFont?null:t.titleFont.color),a.kc("buttonLevel",t.editPassButtonLevel)("buttonSettings",t.editPassButtonSettings)("buttonTitle",t.changePasswordText),a.Ab(1),a.Eb("show",t.changePassword),a.Ab(1),a.kc("color",t.errorForm&&t.password.invalid?"warn":""),a.Ab(1),a.Ec("color",null==t.subtitleFont?null:t.subtitleFont.color),a.kc("formControl",t.password)("placeholder",t.passwordPlaceholder),a.Ab(1),a.kc("ngIf",null==t.password.errors?null:t.password.errors.required),a.Ab(1),a.kc("color",t.errorForm&&t.passwordNew.invalid?"warn":""),a.Ab(1),a.Ec("color",null==t.subtitleFont?null:t.subtitleFont.color),a.kc("formControl",t.passwordNew)("placeholder",t.passwordNewPlaceholder),a.Ab(1),a.kc("ngIf",null==t.passwordNew.errors?null:t.passwordNew.errors.required),a.Ab(1),a.kc("ngIf",null==t.passwordNew.errors?null:t.passwordNew.errors.minlength),a.Ab(1),a.kc("ngIf",null==t.passwordNew.errors?null:t.passwordNew.errors.pattern),a.Ab(1),a.kc("color",t.errorForm&&t.passwordConfirm.invalid?"warn":""),a.Ab(1),a.Ec("color",null==t.subtitleFont?null:t.subtitleFont.color),a.kc("formControl",t.passwordConfirm)("placeholder",t.passwordConfirmPlaceholder),a.Ab(1),a.kc("ngIf",null==t.passwordConfirm.errors?null:t.passwordConfirm.errors.required),a.Ab(1),a.kc("ngIf",null==t.passwordConfirm.errors?null:t.passwordConfirm.errors.isDifferent),a.Ab(1),a.kc("ngIf",t.allowContactEnabled),a.Ab(2),a.kc("gbFontStyle",t.logoutFont)("gbHoverFont",t.logoutFont),a.Ab(1),a.Kc(t.logoutText),a.Ab(1),a.kc("ngIf",!t.disableUnsubscribe),a.Ab(1),a.kc("buttonLevel",t.saveButtonLevel)("buttonSettings",t.saveButtonSettings)("buttonTitle",t.saveText)}}let _n=(()=>{class t{constructor(t,n,e,i,o,s,r,a,l,g,d,b){this.authService=t,this.userManager=n,this.formBuilder=e,this.languagesManager=i,this.dialog=o,this.router=s,this.settingsManager=r,this.viewContainerRef=a,this.linksBuilder=l,this.snackBar=g,this.platform=d,this.drawer=b,this.password=new B.h("",B.H.required),this.passwordNew=new B.h("",[B.H.required,B.H.minLength(8),B.H.pattern(/^\S+$/)]),this.passwordConfirm=new B.h("",[B.H.required,c.FieldsValidators.sameAs(this.passwordNew)]),this.snackbarConfig=new p.b,this.editPassButtonLevel=3,this.saveButtonLevel=1,this.snackbarConfig.duration=3e3}ngOnInit(){this.sectionId=this.settingsManager.getProfileSectionId(),this.initSettings(),this.user=this.authService.authenticatedUser,this.allowContactEnabled=!!this.settingsManager.getChatSectionId(),this.allowContactText=this.languagesManager.getAllowContact(),this.changePasswordText=this.languagesManager.getChangePassword(),this.contactRulesText=this.languagesManager.getContactRules(),this.deleteAccountText=this.languagesManager.getProfileDeleteAccount(),this.loginText=this.languagesManager.getUsernameOrMail(),this.logoutText=this.languagesManager.getLogout(),this.passwordPlaceholder=this.languagesManager.getProfileCurrentPassword(),this.passwordConfirmPlaceholder=this.languagesManager.getConfirmPassword(),this.passwordNewPlaceholder=this.languagesManager.getNewPassword(),this.passwordText=this.languagesManager.getPassword(),this.saveText=this.languagesManager.getProfileSave(),this.settingsText=this.languagesManager.getProfileSettings(),this.minLengthError=this.languagesManager.getPasswordMinimumLengthError().replace("[X]","8"),this.spacesInPasswordError=this.languagesManager.getSpacesNotAllowedInPassword(),this.confirmPasswordNotTheSameError=this.languagesManager.getPasswordDoNotMatch(),this.fieldRequiredError=this.languagesManager.getFieldRequiredError(),this.spacesInLoginError=this.languagesManager.getLoginWhiteSpacesError(),this.form=this.formBuilder.group({login:new B.h(this.user.login,[B.H.pattern(/^\S+$/)])}),this.allowContactEnabled&&this.form.addControl("allowContact",new B.h(this.user.allowContact))}initSettings(){this.isRTL=this.settingsManager.getSectionsIsRtl(this.sectionId),this.disableUnsubscribe=this.settingsManager.getDisableUnsubscribe(this.sectionId),this.saveButtonSettings=this.settingsManager.getProfileSettingsEditSaveButton(this.sectionId,this.saveButtonLevel),this.editPassButtonSettings=this.settingsManager.getProfileSettingsEditPasswordButton(this.editPassButtonLevel),this.infosFont=this.settingsManager.getSectionsInfosFont(this.sectionId),this.listBackgroundColor=this.settingsManager.getSectionsListBackgroundColor(this.sectionId),this.overlayColor=this.settingsManager.getOverlayColor(this.sectionId),this.subtitleFont=this.settingsManager.getSectionsSubtitleFont(this.sectionId,"primary2Color"),this.titleFont=this.settingsManager.getSectionsTitleFont(this.sectionId),this.logoutFont=Object.create(this.subtitleFont),this.logoutFont.fontType=null,this.logoutFont.color="#3d3d3d",this.deleteFont=Object.create(this.subtitleFont),this.deleteFont.fontType=null,this.deleteFont.color="#f44336"}onChangePassword(){this.changePassword?(this.changePassword=!1,this.form.removeControl("password"),this.form.removeControl("passwordNew"),this.form.removeControl("passwordConfirm")):(this.changePassword=!0,this.form.addControl("password",this.password),this.form.addControl("passwordNew",this.passwordNew),this.form.addControl("passwordConfirm",this.passwordConfirm))}onCloseClick(){this.goToProfile()}onLogout(){this.platform.isPreviewApp?this.platform.previewService.notAllowedInPreview():this.authService.logout().subscribe(()=>{this.router.navigate(this.linksBuilder.getHomeRouterLink())})}onSubmit(){if(this.errorForm=!1,this.form.valid)if(this.platform.isPreviewApp)this.platform.previewService.notAllowedInPreview();else{if(this.changePassword){const t=this.password.value,n=this.passwordNew.value;n!==this.passwordConfirm.value?(this.errorForm=!0,this.passwordNew.setErrors({passwordsDoNoMatch:!0}),this.passwordConfirm.setErrors({passwordsDoNoMatch:!0}),this.snackBar.open(this.languagesManager.getPasswordDoNotMatch(),null,this.snackbarConfig)):this.userManager.updatePassword(this.user,n,t).subscribe(()=>{this.snackBar.open(this.languagesManager.getProfileSaved(),null,this.snackbarConfig)},t=>{this.errorForm=!0,this.password.setErrors({invalidPassword:!0}),this.snackBar.open(t,null,this.snackbarConfig)})}if(!this.errorForm){const t=this.form.controls.login.value;if(t!==this.user.login&&this.userManager.updateLogin(this.user,t).subscribe(()=>{this.snackBar.open(this.languagesManager.getProfileSaved(),null,this.snackbarConfig)},t=>{this.errorForm=!0,this.snackBar.open(t,null,this.snackbarConfig)}),this.allowContactEnabled){const t=this.form.controls.allowContact.value;t!==this.user.allowContact&&this.userManager.updateAllowContact(this.user,t).subscribe(()=>{this.snackBar.open(this.languagesManager.getProfileSaved(),null,this.snackbarConfig)})}this.goToProfile()}}else this.errorForm=!0}openModal(){if(this.platform.isPreviewApp)this.platform.previewService.notAllowedInPreview();else{let t=new q.e;t.viewContainerRef=this.viewContainerRef;let n=this.dialog.open(Mn,t);n.componentInstance.buttonBackgroundColor=this.settingsManager.getEditButtonBackgroundColor(this.sectionId),n.componentInstance.buttonTextColor=this.settingsManager.getEditButtonTextColor(this.sectionId),n.componentInstance.titleFont=this.titleFont,n.componentInstance.textFont=this.subtitleFont,n.afterClosed().subscribe(t=>{if(t){let t=this.userManager.deleteUser().subscribe(n=>{this.router.navigate(this.linksBuilder.getHomeRouterLink()),t.unsubscribe()})}})}}resetErrorForm(){this.errorForm=!1,this.passwordNew.updateValueAndValidity(),this.passwordConfirm.updateValueAndValidity()}goToProfile(){this.drawer&&this.drawer.close()}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(c.AuthService),a.Mb(c.AuthUserManager),a.Mb(B.g),a.Mb(c.LanguagesManager),a.Mb(q.b),a.Mb(i.i),a.Mb(h.ProfileSettingsManager),a.Mb(a.Q),a.Mb(c.LinksBuilder),a.Mb(p.a),a.Mb(c.PlatformService),a.Mb(c.GBDrawerContainerComponent))},t.\u0275cmp=a.Gb({type:t,selectors:[["ng-component"]],decls:3,vars:6,consts:[["leftIconUrl","close",3,"sectionId","title","clickLeft"],[1,"settings",3,"gbDirRtl"],[3,"formGroup","error","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"settings-inner"],[1,"settings-title"],[1,"settings-block"],["matInput","","formControlName","login",3,"placeholder","keydown"],[4,"ngIf"],["type","button","gbButtonV2","",1,"change-password-button",3,"buttonLevel","buttonSettings","buttonTitle","click"],[1,"change-password"],[3,"color"],["matInput","","type","password",3,"formControl","placeholder","keydown"],[1,"settings-block","links"],[1,"action",3,"gbFontStyle","gbHoverFont","click"],["class","action delete",3,"gbFontStyle","gbHoverFont","click",4,"ngIf"],["type","submit","gbButtonV2","",1,"button",3,"buttonLevel","buttonSettings","buttonTitle"],["formControlName","allowContact"],[1,"allow-contact"],[1,"action","delete",3,"gbFontStyle","gbHoverFont","click"]],template:function(t,n){1&t&&(a.Sb(0,"gb-sidenav-header",0),a.Zb("clickLeft",(function(){return n.onCloseClick()})),a.Rb(),a.Sb(1,"div",1),a.Hc(2,In,33,53,"form",2),a.Rb()),2&t&&(a.kc("sectionId",n.sectionId)("title",n.settingsText),a.Ab(1),a.Ec("background-color",n.overlayColor),a.kc("gbDirRtl",n.isRTL),a.Ab(1),a.kc("ngIf",n.form))},directives:[wt.a,lt.a,R.t,B.J,B.u,B.l,L.c,u.b,B.d,B.t,B.j,N.a,B.i,H.a,Jt.a,L.b,Et.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.header-title[_ngcontent-%COMP%]{height:64px;text-align:center;position:relative;display:flex;flex-direction:row;justify-content:center;align-items:center;cursor:pointer;flex-shrink:0}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;flex:1}.header-title[_ngcontent-%COMP%]   [gbIcon][_ngcontent-%COMP%]{position:absolute;top:20px;right:20px}[_nghost-%COMP%]     form.error .ng-invalid .mat-form-field-underline{border-top-color:#f44336}[_nghost-%COMP%]     form.error .ng-invalid .mat-form-field-underline .mat-form-field-ripple.mat-warn, [_nghost-%COMP%]     form.error .ng-invalid label{color:#f44336}.settings[_ngcontent-%COMP%]{flex:1;position:relative;color:#3d3d3d}.settings[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]{position:relative;overflow:auto}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-title[_ngcontent-%COMP%]{padding:10px 20px}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;font-family:Roboto,Helvetica,Arial,sans-serif}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]{background-color:#fff;padding:4px 20px}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-form-field{width:100%;margin-top:1em}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-form-field .mat-input-element{color:#3d3d3d!important}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-form-field .mat-form-field-label.mat-focused{color:#222}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-form-field .mat-form-field-underline .mat-form-field-ripple{background-color:#222}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.change-password-button){margin:1em 0}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]   .change-password-button[_ngcontent-%COMP%]{margin-left:-16px}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]   .change-password[_ngcontent-%COMP%]{opacity:0;overflow:hidden;max-height:0;transition:all .35s ease-in-out}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]   .change-password.show[_ngcontent-%COMP%]{opacity:1;max-height:250px}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-slide-toggle{height:auto}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-slide-toggle label{align-items:center}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-slide-toggle label>span{margin-left:8px;white-space:normal}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-slide-toggle label>span>span{color:#3d3d3d!important}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-slide-toggle .allow-contact{font-size:16px}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:rgba(76,217,100,.5)}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#4cd964}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-slide-toggle.mat-slide-toggle-focused .mat-ink-ripple{background-color:rgba(76,217,100,.26)}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{padding:12px 0;cursor:pointer}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-block.links[_ngcontent-%COMP%]{margin-top:80px}.settings[dir=rtl][_ngcontent-%COMP%]   .settings-block[_ngcontent-%COMP%]     mat-slide-toggle>label>.mat-slide-toggle-bar{margin-left:0;margin-right:8px;order:1}.button[_ngcontent-%COMP%]{padding:0 20px;margin-top:16px}@media only screen and (orientation:landscape) and (min-width:960px) and (max-width:1279px),only screen and (orientation:portrait) and (min-width:600px) and (max-width:1024px){.header-title[_ngcontent-%COMP%]{height:44px}.header-title[_ngcontent-%COMP%]   [gbIcon][_ngcontent-%COMP%]{top:10px;right:10px}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-title[_ngcontent-%COMP%]{padding:8px 20px}.settings[_ngcontent-%COMP%]   .settings-inner[_ngcontent-%COMP%]   .settings-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px!important}}@media only screen and (orientation:landscape) and (max-width:959px),only screen and (orientation:portrait) and (max-width:599px){.header-title[_ngcontent-%COMP%]{height:44px}.header-title[_ngcontent-%COMP%]   [gbIcon][_ngcontent-%COMP%]{top:10px;right:10px}}"]}),Object(r.b)([Object(l.PreviewListener)("sections")],t.prototype,"initSettings",null),t})();var An=e("2YbU"),Fn=e("b4Nl"),Tn=e("lKIV"),Rn=e("TvDM"),Bn=e("0wlX"),Ln=e("PEGF"),Hn=e("b0Up"),En=e("BhIP"),Nn=e("mvK6"),jn=e("Tgol"),Un=e("faax");function Dn(t,n){1&t&&a.Nb(0,"gb-navbar-shortcuts")}function Gn(t,n){1&t&&a.Nb(0,"gb-navbar-back-button",9),2&t&&a.kc("isCancel",!0)}function zn(t,n){1&t&&a.Nb(0,"gb-navbar-ok-button")}function Jn(t,n){1&t&&a.Nb(0,"gb-root-tabbar-main",10)}function Kn(t,n){1&t&&a.Nb(0,"gb-root-tabbar-main")}let Vn=(()=>{class t{constructor(t,n,e,i,o,s){this.platform=t,this.root=n,this.navigation=e,this.linksBuilder=i,this.settingsManager=o,this.anim=s,this.nodeType=c.NodeType.List,this.nodeTypes=c.NodeType,this.unsubscribe=new a.n,this.mainOutletActivation=new a.n}ngOnInit(){this.sectionId=this.settingsManager.getProfileSectionId()}ngOnDestroy(){this.unsubscribe.emit(),this.unsubscribe.complete()}get largestNavBarTemplateType(){return this.nodeType===c.NodeType.List?c.NavBarTemplateType.Medium:c.NavBarTemplateType.Small}onMainNavActivate(t){this.showTextButtons=!1,this.onEditPage=!1,t instanceof Ht?this.nodeType=c.NodeType.Detail:t instanceof Pt?(this.nodeType=c.NodeType.Detail,this.onEditPage=!0,this.showTextButtons=!0):this.nodeType=c.NodeType.List,this.mainOutletActivation.emit()}onMainNavDectivate(){this.showTextButtons=!1,this.onEditPage=!1,this.nodeType=c.NodeType.List}onDeactivate(t){t instanceof zt||this.drawer&&this.drawer.close()}onClose(){this.anim.disableComingAnimation(),this.navigation.navigateWithoutHistory(this.linksBuilder.getSectionRouterLink(this.sectionId))}}return t.\u0275fac=function(n){return new(n||t)(a.Mb(c.PlatformService),a.Mb(d.a),a.Mb(c.NavigationManager),a.Mb(c.LinksBuilder),a.Mb(h.ProfileSettingsManager),a.Mb(yt.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["ng-component"]],viewQuery:function(t,n){var e;1&t&&a.Cc(c.GBDrawerContainerComponent,!0),2&t&&a.qc(e=a.ac())&&(n.drawer=e.first)},features:[a.zb([h.PROFILE_PROVIDERS])],decls:14,vars:10,consts:[["mode","over","position","end",3,"drawerClose"],["drawer",""],[3,"disabledBackAnimation","sectionId","node","largestTemplate"],[3,"sectionId"],[4,"ngIf"],[3,"gbNavigationWithoutAnimationLink","isCancel",4,"ngIf"],["gbStickTo","navbar",4,"ngIf"],[3,"activate","deactivate"],["name","panel",3,"activate","deactivate"],[3,"gbNavigationWithoutAnimationLink","isCancel"],["gbStickTo","navbar"]],template:function(t,n){if(1&t){const t=a.Tb();a.Sb(0,"gb-drawer-container",0,1),a.Zb("drawerClose",(function(){return n.onClose()})),a.Sb(2,"gb-header"),a.Sb(3,"gb-navbar",2),a.Nb(4,"gb-navbar-title",3),a.Hc(5,Dn,1,0,"gb-navbar-shortcuts",4),a.Hc(6,Gn,1,1,"gb-navbar-back-button",5),a.Hc(7,zn,1,0,"gb-navbar-ok-button",4),a.Rb(),a.Sb(8,"gb-header-navigation"),a.Hc(9,Jn,1,0,"gb-root-tabbar-main",6),a.Rb(),a.Rb(),a.Sb(10,"router-outlet",7),a.Zb("activate",(function(t){return n.onMainNavActivate(t)}))("deactivate",(function(){return n.onMainNavDectivate()})),a.Rb(),a.Hc(11,Kn,1,0,"gb-root-tabbar-main",4),a.Sb(12,"gb-drawer"),a.Sb(13,"router-outlet",8),a.Zb("activate",(function(){return a.vc(t),a.rc(1).open()}))("deactivate",(function(t){return n.onDeactivate(t)})),a.Rb(),a.Rb(),a.Rb()}2&t&&(a.Ab(3),a.kc("disabledBackAnimation",n.onEditPage)("sectionId",n.sectionId)("node",n.nodeType)("largestTemplate",n.largestNavBarTemplateType),a.Ab(1),a.kc("sectionId",n.sectionId),a.Ab(1),a.kc("ngIf",n.nodeType===n.nodeTypes.List),a.Ab(1),a.kc("ngIf",n.platform.isMobileSize()&&n.showTextButtons),a.Ab(1),a.kc("ngIf",n.platform.isMobileSize()&&n.showTextButtons),a.Ab(2),a.kc("ngIf",n.root.tabBarTopIsVisible),a.Ab(2),a.kc("ngIf",n.root.tabBarBottomIsVisible))},directives:[An.a,Fn.a,Tn.a,Rn.a,R.t,Bn.a,i.n,Ln.a,Hn.a,En.a,j.a,Nn.a,jn.a,Un.a],encapsulation:2}),t})();var Zn=e("1oco"),$n=e("wYZb"),Wn=e("jXgJ");const qn=[{path:"",component:Vn,canActivate:[h.ProfileGuard],data:{routerShouldReuse:!0},children:[{path:"",component:mn,pathMatch:"full"},{path:"push",children:[{path:"",component:mn},{path:"",component:Ht,outlet:"panel"},{path:"settings",component:zt,outlet:"panel"}]},{path:"edit",component:Pt},{path:"settings",children:[{path:"",component:mn},{path:"settings",component:_n,outlet:"panel"}]}]}];let Qn=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(n){return new(n||t)},providers:[h.ProfileGuard,{provide:h.ProfileSettingsManager,useFactory:Xn,deps:[c.SettingsManager,c.LanguagesManager,c.Logger]},c.LoadMoreManager,{provide:o.e,useFactory:c.getGbDateFormatTxt4,deps:[c.SettingsManager]}],imports:[[i.m.forChild(qn),Wn.a,Zn.a,$n.TabBarModule,s.c]]}),t})();function Xn(t,n,e){const i=new h.ProfileSettingsManager(n,e);return i.settings=t.settings,i}}}]);
//# sourceMappingURL=46-es2015.344cf00622ae250d944b.js.map